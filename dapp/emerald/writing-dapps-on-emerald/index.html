<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-dapp/emerald/writing-dapps-on-emerald">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Writing dApps on Emerald | Oasis Network Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.oasis.io/dapp/emerald/writing-dapps-on-emerald"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Writing dApps on Emerald | Oasis Network Documentation"><meta data-rh="true" name="description" content="This tutorial will show you how to set up dApp development environment for"><meta data-rh="true" property="og:description" content="This tutorial will show you how to set up dApp development environment for"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.oasis.io/dapp/emerald/writing-dapps-on-emerald"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/dapp/emerald/writing-dapps-on-emerald" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/dapp/emerald/writing-dapps-on-emerald" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.03bfe953.css">
<link rel="preload" href="/assets/js/runtime~main.df39c847.js" as="script">
<link rel="preload" href="/assets/js/main.4ff8f277.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OPF Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="OPF Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Oasis Docs</b></a><a class="navbar__item navbar__link" href="/general/">Use Oasis</a><a class="navbar__item navbar__link" href="/get-involved/">Get Involved</a><a class="navbar__item navbar__link" href="/node/">Run Node</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/dapp/">Create dApp</a><a class="navbar__item navbar__link" href="/paratime/">Build ParaTime</a><a class="navbar__item navbar__link" href="/core/">Develop Core</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="GitHub repository" aria-label="GitHub repository"></a><a href="https://oasisprotocol.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-www-link" title="Oasis Protocol Foundation website" aria-label="Oasis Protocol Foundation website"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dapp/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/dapp/emerald/">Emerald ParaTime</a><button aria-label="Toggle the collapsible sidebar category &#x27;Emerald ParaTime&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/dapp/emerald/writing-dapps-on-emerald">Writing dApps on Emerald</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dapp/emerald/integrating-band-oracle-smart-contract">Integrating BAND oracle smart contract</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/dapp/sapphire/">Sapphire ParaTime</a><button aria-label="Toggle the collapsible sidebar category &#x27;Sapphire ParaTime&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/dapp/cipher/">Cipher ParaTime</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cipher ParaTime&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Writing dApps on Emerald</h1><p>This tutorial will show you how to set up dApp development environment for
Emerald to be able to write and deploy dApps on Oasis Emerald.</p><p>We will walk you through the Hardhat and Truffle configuration and -
for those who prefer a simpler web-only interface - the Remix IDE.
Oasis Emerald exposes an EVM-compatible interface so writing dApps isn&#x27;t much
different compared to the original Ethereum Network!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="oasis-consensus-layer-and-emerald-paratime">Oasis Consensus Layer and Emerald ParaTime<a class="hash-link" href="#oasis-consensus-layer-and-emerald-paratime" title="Direct link to heading">​</a></h2><p>Oasis Network consists of the consensus layer and a number of Layer 2 chains
called the ParaTimes (to learn more, check the <a href="/general/oasis-network/">Oasis Network Overview</a> chapter). Emerald is a ParaTime which implements the Ethereum
Virtual Machine (EVM).</p><p>The minimum and also expected block time in Emerald is <strong>6 seconds</strong>. Any
Emerald transaction will require at least this amount of time to be executed.</p><p>The native Oasis addresses are Bech32-encoded (e.g. <code>oasis1qpupfu7e2n6pkezeaw0yhj8mcem8anj64ytrayne</code>)
while Emerald supports both the Bech32-encoded and the Ethereum-compatible
hex-encoded addresses (e.g. <code>0x90adE3B7065fa715c7a150313877dF1d33e777D5</code>). The
underlying algorithm for signing the transactions is <a href="https://en.wikipedia.org/wiki/EdDSA#Ed25519" target="_blank" rel="noopener noreferrer">Ed25519</a> on the Consensus
layer and both <a href="https://en.wikipedia.org/wiki/EdDSA#Ed25519" target="_blank" rel="noopener noreferrer">Ed25519</a> and <a href="https://en.wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm" target="_blank" rel="noopener noreferrer">ECDSA</a> in Emerald. The Ed25519 scheme is used
mostly by the Emerald compute nodes for managing their computation rewards. For
signing your dApp-related transactions on Emerald you will probably want to use
ECDSA since this is the de facto scheme supported by Ethereum wallets and
libraries.</p><p>Finally, the ParaTimes are not allowed to directly access your tokens stored in
Consensus layer addresses. You will need to <strong>deposit</strong> tokens from your consensus
account to Emerald. Consult the <a href="/general/manage-tokens/how-to-transfer-rose-into-paratime">How to transfer ROSE into Emerald ParaTime</a> chapter to learn more.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testnet-and-mainnet">Testnet and Mainnet<a class="hash-link" href="#testnet-and-mainnet" title="Direct link to heading">​</a></h2><p>The Oasis Network currently has, similar to some other blockchains, two major
public deployments: the <a href="/node/mainnet/">Mainnet</a> and the <a href="/node/testnet/">Testnet</a>. The
native tokens are called ROSE and TEST respectively. Each deployment has its own
state, a different set of validators and ParaTimes. The state of the Mainnet is
considered immutable for indefinite time, while the data on the Testnet can be
subject to wipe in the future.</p><p>The Emerald ParaTime is deployed similarly: the <a href="/dapp/emerald/#mainnet">Emerald Mainnet</a> is deployed on the Oasis Mainnet
Network while the <a href="/dapp/emerald/#testnet">Emerald Testnet</a> on the Oasis Testnet Network. The Emerald state on the Mainnet
is stable. Testnet, apart from running the unstable version of the code and being prone to bugs, can
have the state deliberately wiped either on the Emerald ParaTime layer or on the Oasis Testnet
Network level.</p><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Never deploy production service on Testnet</div><div class="admonitionContent_S0QG"><p>Because Testnet state can be wiped in the future, you should <strong>never deploy a
production service on the Testnet</strong>!</p></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>For testing purposes, visit our <a href="https://faucet.testnet.oasis.dev/" target="_blank" rel="noopener noreferrer">Testnet faucet</a> to obtain some TEST which you
can then use on the Emerald Testnet to pay for gas fees. The faucet supports
sending TEST both to your Consensus layer address or to your address inside the
ParaTime.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-private-oasis-network-locally">Running Private Oasis Network Locally<a class="hash-link" href="#running-private-oasis-network-locally" title="Direct link to heading">​</a></h2><p>For convenient development and testing of your dApps the Oasis team prepared
the <a href="https://hub.docker.com/r/oasisprotocol/emerald-dev" target="_blank" rel="noopener noreferrer">oasisprotocol/emerald-dev</a> Docker image which brings you a complete Oasis
stack to your desktop. This network is isolated from the Mainnet or Testnet and
consists of:</p><ul><li>single Oasis validator node with 1-second block time,</li><li>three Oasis compute nodes running Emerald ParaTime,</li><li>Emerald Web3 gateway with transaction indexer,</li><li>helper script which populates initial test accounts for you.</li></ul><p>To run the image, execute:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -it -p8545:8545 -p8546:8546 oasisprotocol/emerald-dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After a while, the tool will show you something like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">emerald-dev 2022-03-11-git38da200 (oasis-core: 22.0, emerald-paratime: 7.1.0-rc1, emerald-web3-gateway: 2.0.0-rc1-git38da200)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting oasis-net-runner with Emerald ParaTime...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting postgresql...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting emerald-web3-gateway...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Populating account(s) (this might take a moment)...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Available Accounts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(0) 0x75eCF0d4496C2f10e4e9aF3D4d174576Ee9010E2 (100 ROSE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1) 0x903a7dce5a26a3f4DE2d157606c2191740Bc4BC9 (100 ROSE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(2) 0xF149ad5CBFfD92ba84F5784106f6Cb071A32a1b8 (100 ROSE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(3) 0x2315F40C1122400Df55483743B051D2997ef0a62 (100 ROSE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(4) 0xf6FdcacbA93A428A07d27dacEf1fBF25E2C65B0F (100 ROSE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Private Keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(0) 0x160f52faa5c0aecfa26c793424a04d53cbf23dcad5901ce15b50c2e85b9d6ca7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1) 0x0ba685723b47d8e744b1b70a9bea9d4d968f60205385ae9de99865174c1af110</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(2) 0xfa990cf0c22af455d2734c879a2a844ff99bd779b400bb0e2919758d1be284b5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(3) 0x3bf225ef73b1b56b03ceec8bb4dfb4830b662b073b312beb7e7fec3159b1bb4f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(4) 0xad0dd7ceb896fd5f5ddc76d56e54ee6d5c2a3ffeac7714d3ef544d3d6262512c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HD Wallet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Mnemonic:       bench remain brave curve frozen verify dream margin alarm world repair innocent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Base HD Path:   m/44&#x27;/60&#x27;/0&#x27;/0/%d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WARNING: Emerald is running in ephemeral mode. The chain state will be lost after you quit!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Listening on http://localhost:8545 and ws://localhost:8546</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Those familiar with local dApp environments will find the output above similar
to <code>geth --dev</code> or <code>ganache-cli</code> commands or the <code>geth-dev-assistant</code> npm
package. <a href="https://hub.docker.com/r/oasisprotocol/emerald-dev" target="_blank" rel="noopener noreferrer">emerald-dev</a> will spin up a private Oasis Network locally, generate
and populate test accounts and make the following Web3 endpoints available for
you to use:</p><ul><li><code>http://localhost:8545</code></li><li><code>ws://localhost:8546</code></li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>If you prefer using the same mnemonics each time (e.g. for testing purposes)
or to populate just a single wallet, use <code>-to</code> flag and pass the mnemonics or
the wallet address. For example</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -it -p8545:8545 -p8546:8546 oasisprotocol/emerald-dev -to &quot;bench remain brave curve frozen verify dream margin alarm world repair innocent&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run -it -p8545:8545 -p8546:8546 oasisprotocol/emerald-dev -to &quot;0x75eCF0d4496C2f10e4e9aF3D4d174576Ee9010E2&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p><a href="https://hub.docker.com/r/oasisprotocol/emerald-dev" target="_blank" rel="noopener noreferrer">emerald-dev</a> runs in ephemeral mode. Any smart contract and wallet balance
will be lost after you quit the Docker container!</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-dapp-on-emerald-with-hardhat">Create dApp on Emerald with Hardhat<a class="hash-link" href="#create-dapp-on-emerald-with-hardhat" title="Direct link to heading">​</a></h2><p>Let&#x27;s begin writing our dApp with Hardhat. We will lay out a base for a modern
dApp including TypeScript bindings for tests and later for the frontend
application.</p><p>First, make sure you installed <a href="https://nodejs.org" target="_blank" rel="noopener noreferrer">Node.js</a> and that you have <code>npm</code> and <code>npx</code>
readily available. Then run:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npx hardhat init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Select the <code>Create an advanced sample project that uses TypeScript</code> option and
enter the root directory for your project. You can leave other options as
default. After a while Hardhat will finish downloading the dependencies and
create a simple greeter dApp.</p><p>To compile, deploy and test the smart contract of your sample project locally,
move to your project directory and type:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ npx hardhat compile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Compiling 2 files with 0.8.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Generating typings for: 2 artifacts in dir: typechain for target: ethers-v5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully generated 5 typings!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Compilation finished successfully</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ npx hardhat test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No need to generate any newer typings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Greeter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deploying an Emerald Greeter with greeting: Hello, world!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Changing greeting from &#x27;Hello, world!&#x27; to &#x27;Hola, mundo!&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ✓ Should return the new greeting once it&#x27;s changed (613ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1 passing (614ms)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Hardhat already comes with a built-in EVM which is spun up from scratch each
time we call <code>hardhat test</code> without parameters. It populates 20 accounts with
ETH and registers them to the <a href="https://docs.ethers.io/v5/" target="_blank" rel="noopener noreferrer">ethers.js</a> instance used in the tests.</p><p>Next, let&#x27;s look at how to configure Hardhat for Emerald. For convenience, we
assign the <code>PRIVATE_KEY</code> environment variable a hex-encoded private key of your
Emerald wallet containing tokens to pay for gas fees. If you are running
<a href="https://hub.docker.com/r/oasisprotocol/emerald-dev" target="_blank" rel="noopener noreferrer">emerald-dev</a>, use any of the five generated private keys.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export PRIVATE_KEY=&quot;YOUR_0x_EMERALD_PRIVATE_KEY&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next, we configure three networks: <code>emerald_local</code>, <code>emerald_testnet</code>, and
<code>emerald_mainnet</code>. Open <code>hardhat.config.ts</code> and replace the <code>networks</code> field to
match the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">networks: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emerald_local: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      url: &quot;http://localhost:8545&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        process.env.PRIVATE_KEY !== undefined ? [process.env.PRIVATE_KEY] : [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emerald_testnet: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      url: &quot;https://testnet.emerald.oasis.dev&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        process.env.PRIVATE_KEY !== undefined ? [process.env.PRIVATE_KEY] : [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emerald_mainnet: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      url: &quot;https://emerald.oasis.dev&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        process.env.PRIVATE_KEY !== undefined ? [process.env.PRIVATE_KEY] : [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next, we increase the default timeout for mocha tests from 20 seconds to 60
seconds. This step is not needed, if you will test your contracts solely on
<a href="https://hub.docker.com/r/oasisprotocol/emerald-dev" target="_blank" rel="noopener noreferrer">emerald-dev</a>, but is required for Testnet to avoid timeouts. Append the
following block to the <code>config</code> object:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mocha: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  timeout: 60000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p><code>geth --dev</code> and <code>ganache-cli</code> tools use a so-called &quot;instant mining&quot; mode.
In this mode, a new block is mined immediately when a new transaction occurs in
the mempool. Neither Oasis Mainnet and Testnet Networks nor <a href="https://hub.docker.com/r/oasisprotocol/emerald-dev" target="_blank" rel="noopener noreferrer">emerald-dev</a>
support such mode and the new block will always be mined at least after the 1
second block time elapsed.</p></div></div><p>Now deploy the contract to the local <a href="https://hub.docker.com/r/oasisprotocol/emerald-dev" target="_blank" rel="noopener noreferrer">emerald-dev</a> Docker container by
selecting the <code>emerald_local</code> network we configured above and run the tests:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ npx hardhat run scripts/deploy.ts --network emerald_local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No need to generate any newer typings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Greeter deployed to: 0x4e1de2f6cf4e57a8f55b4a5dd1fce770db734962</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ npx hardhat test --network emerald_local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No need to generate any newer typings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Greeter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ✓ Should return the new greeting once it&#x27;s changed (6017ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1 passing (6s)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next, you can try deploying the contract to the Testnet. Temporarily replace
your <code>PRIVATE_KEY</code> environment variable with your Testnet one and deploy the
contract by using the <code>emerald_testnet</code> network. Similarly, you can also
run the tests.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ PRIVATE_KEY=&quot;0xYOUR_TESTNET_PRIVATE_KEY&quot; npx hardhat run scripts/deploy.ts --network emerald_testnet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No need to generate any newer typings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Greeter deployed to: 0x735df9F166a2715bCA3D3A66B119CBef95a0D129</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ PRIVATE_KEY=&quot;0xYOUR_TESTNET_PRIVATE_KEY&quot; npx hardhat test --network emerald_testnet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No need to generate any newer typings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Greeter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ✓ Should return the new greeting once it&#x27;s changed (21016ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1 passing (6s)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Congratulations, you have just deployed your first smart contract to the public
Emerald Testnet Network! If you are unsure, whether your contract was
successfully deployed, you can monitor the transactions on the Emerald block
explorer (<a href="https://explorer.emerald.oasis.dev" target="_blank" rel="noopener noreferrer">Mainnet</a>, <a href="https://testnet.explorer.emerald.oasis.dev" target="_blank" rel="noopener noreferrer">Testnet</a>). This tool
indexes all Emerald accounts, blocks, transactions and even offers a neat user
interface for browsing ETH-specifics like the ERC20 tokens and the ERC721 NFTs.</p><p><img loading="lazy" alt="Emerald Block Explorer showing the latest transactions" src="/assets/images/block_explorer1-300ad8505c206bca6ecb6416836e6770.png" width="2205" height="1335" class="img_ev3q"></p><p><img loading="lazy" alt="Emerald Block Explorer showing our account 0x90adE3B7065fa715c7a150313877dF1d33e777D5 used for deploying the smart contract" src="/assets/images/block_explorer2-c07d43edbfeb9e90e1b38710179e9062.png" width="2208" height="1339" class="img_ev3q"></p><p>Finally, by selecting the <code>emerald_mainnet</code> network and the corresponding
private key, we can deploy the contract on the Mainnet:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ PRIVATE_KEY=&quot;0xYOUR_MAINNET_PRIVATE_KEY&quot; npx hardhat run scripts/deploy.ts --network emerald_mainnet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No need to generate any newer typings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Greeter deployed to: 0x6e8e9e0DBCa4EF4a65eBCBe4032e7C2a6fb7C623</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-dapp-on-emerald-with-truffle">Create dApp on Emerald with Truffle<a class="hash-link" href="#create-dapp-on-emerald-with-truffle" title="Direct link to heading">​</a></h2><p>Truffle and its accompanying <a href="https://web3js.readthedocs.io/en/v1.5.2/" target="_blank" rel="noopener noreferrer">web3.js</a> library is another popular smart
contract deployment tool. Let&#x27;s follow <a href="https://trufflesuite.com/docs/truffle/quickstart.html" target="_blank" rel="noopener noreferrer">the official Truffle&#x27;s quickstart
guide</a> and unbox the MetaCoin example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir MetaCoin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cd MetaCoin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ npx truffle unbox metacoin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting unbox...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✔ Preparing to download box</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✔ Downloading</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✔ Cleaning up temporary files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✔ Setting up box</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Unbox successful, sweet!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Compile contracts: truffle compile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Migrate contracts: truffle migrate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Test contracts:    truffle test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To compile and test the contract type:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ npx truffle test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Using network &#x27;test&#x27;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Compiling your contracts...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===========================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Compiling ./test/TestMetaCoin.sol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Artifacts written to /tmp/test--1052348-l4q3zOSy9nRA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Compiled successfully using:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - solc: 0.5.16+commit.9c3226ce.Emscripten.clang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TestMetaCoin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ✓ testInitialBalanceUsingDeployedContract (112ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ✓ testInitialBalanceWithNewMetaCoin (106ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Contract: MetaCoin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ✓ should put 10000 MetaCoin in the first account (59ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ✓ should call a function that depends on a linked library (78ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ✓ should send coin correctly (185ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  5 passing (6s)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This spawns an instance of Truffle Develop blockchain in the background with a
number of prepopulated ETH accounts and runs the tests.</p><p>Now, let&#x27;s add support to Truffle for reading the private key stored in the
environment variable. Add the <code>@truffle/hdwallet-provider</code> package:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ npm i @truffle/hdwallet-provider --save-dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Import the library by adding the following line at the beginning of your
<code>truffle-config.js</code>:</p><p><code>const HDWalletProvider = require(&quot;@truffle/hdwallet-provider&quot;);</code></p><p>Open <code>truffle-config.js</code> and configure the <code>emerald_local</code>, <code>emerald_testnet</code>
and <code>emerald_mainnet</code> networks:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">emerald_local: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  url: &quot;http://localhost:8545&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  provider: function() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new HDWalletProvider(process.env.PRIVATE_KEYS.split(&quot;,&quot;), &quot;http://localhost:8545&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  network_id: &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">emerald_testnet: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  url: &quot;https://testnet.emerald.oasis.dev:8545&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  provider: function() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new HDWalletProvider(process.env.PRIVATE_KEY, &quot;https://testnet.emerald.oasis.dev&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  network_id: &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">emerald_mainnet: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  url: &quot;https://emerald.oasis.dev:8545&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  provider: function() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new HDWalletProvider(process.env.PRIVATE_KEY, &quot;https://emerald.oasis.dev&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  network_id: &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The MetaCoin example is somewhat specific in that it expects at least two
private keys for running the token transfer test. That&#x27;s why we use the
<code>.split(&quot;,&quot;)</code> in the <code>emerald_local</code> network configuration above and we assign
two private keys to the environment variable. If you are running <a href="https://hub.docker.com/r/oasisprotocol/emerald-dev" target="_blank" rel="noopener noreferrer">emerald-dev</a>,
copy and paste any two of the generated private keys.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export PRIVATE_KEYS=&quot;0xYOUR_FIRST_EMERALD_PRIVATE_KEY,0xYOUR_SECOND_EMERALD_PRIVATE_KEY&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When we run the tests Truffle will deploy the contract with its dependencies
and call the contract numerous times so it may take a few moments to complete.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ truffle test --network emerald_local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Using network &#x27;emerald_local&#x27;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Compiling your contracts...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===========================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Compiling ./test/TestMetaCoin.sol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Artifacts written to /tmp/test--1083354-x87wt3FdmfDE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Compiled successfully using:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - solc: 0.5.16+commit.9c3226ce.Emscripten.clang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TestMetaCoin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ✓ testInitialBalanceUsingDeployedContract (1091ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ✓ testInitialBalanceWithNewMetaCoin (913ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Contract: MetaCoin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ✓ should put 10000 MetaCoin in the first account (349ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ✓ should call a function that depends on a linked library (677ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">account one: 0x90adE3B7065fa715c7a150313877dF1d33e777D5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">account two: 0x33a8Ba274FEdFeed6A08d09eC524a1E1A6Da8262</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ✓ should send coin correctly (2795ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  5 passing (26s)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In order to deploy the contracts to the Testnet and finally the Mainnet run the
<code>migrate</code> Truffle command and use the <code>emerald_testnet</code> or <code>emerald_mainnet</code>
network accordingly. For the Mainnet, you would run something like this and in
a few rounds - depending on the network congestion - the contracts will be
deployed:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ PRIVATE_KEY=0xYOUR_MAINNET_PRIVATE_KEY truffle migrate --network emerald_mainnet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Compiling your contracts...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===========================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Everything is up to date, there is nothing to compile.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting migrations...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">======================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Network name:    &#x27;emerald_mainnet&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Network id:      42262</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Block gas limit: 21000000 (0x1406f40)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1_initial_migration.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">======================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Deploying &#x27;Migrations&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; transaction hash:    0x1630945ac8abfe6395a2e2627bd0acfffcf4bda9e107943cb3e4d6ef1d0905d4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; Blocks: 1            Seconds: 44</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; contract address:    0xFaeA7eda8Be7AC83f811019094D0065D28F52c7c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; block number:        93914</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; block timestamp:     1642176860</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; account:             0x90adE3B7065fa715c7a150313877dF1d33e777D5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; balance:             0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; gas used:            209087 (0x330bf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; gas price:           0 gwei</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; value sent:          0 ETH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; total cost:          0 ETH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; Saving migration to chain.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; Saving artifacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; Total cost:                   0 ETH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2_deploy_contracts.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=====================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Deploying &#x27;ConvertLib&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; transaction hash:    0xf2c53938773c316051f4ce98395e5df21cfcf0c686f634c1079725e04b9c556c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; Blocks: 2            Seconds: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; contract address:    0xA0FB05d6Ce497beb162C4EbA4F203544B18A3f31</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; block number:        93918</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; block timestamp:     1642177009</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; account:             0x90adE3B7065fa715c7a150313877dF1d33e777D5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; balance:             0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; gas used:            121235 (0x1d993)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; gas price:           0 gwei</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; value sent:          0 ETH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; total cost:          0 ETH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Linking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   * Contract: MetaCoin &lt;--&gt; Library: ConvertLib (at address: 0xA0FB05d6Ce497beb162C4EbA4F203544B18A3f31)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Deploying &#x27;MetaCoin&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   --------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; transaction hash:    0x2c5e8177df03d643e56a37b64cbe660420b114ffec097dc5d793bfc666af8e16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; Blocks: 2            Seconds: 60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; contract address:    0x5a1C04012bc233c898aebb8BB4353F80D96f3dD2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; block number:        93920</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; block timestamp:     1642177073</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; account:             0x90adE3B7065fa715c7a150313877dF1d33e777D5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; balance:             0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; gas used:            361168 (0x582d0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; gas price:           0 gwei</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; value sent:          0 ETH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; total cost:          0 ETH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; Saving migration to chain.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; Saving artifacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &gt; Total cost:                   0 ETH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Summary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=======</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Total deployments:   3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Final cost:          0 ETH</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the output above, the MetaCoin contract has been successfully deployed to
<code>0x5a1C04012bc233c898aebb8BB4353F80D96f3dD2</code> address on the Mainnet.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-dapp-on-emerald-with-remix---ethereum-ide">Create dApp on Emerald with Remix - Ethereum IDE<a class="hash-link" href="#create-dapp-on-emerald-with-remix---ethereum-ide" title="Direct link to heading">​</a></h2><p><a href="https://remix.ethereum.org" target="_blank" rel="noopener noreferrer">Remix</a> is a popular web IDE for swift development, deployment and testing
smart contracts on the Ethereum Network. We will use it in combination with
MetaMask to access the network settings and your wallet to sign and submit the
transactions.</p><p>If you haven&#x27;t done it yet, first <a href="/general/manage-tokens/how-to-transfer-rose-into-paratime#verifying-rose-balance-on-paratime">install the MetaMask extension for your
browser</a>. Import your wallet and configure Emerald Testnet and
Mainnet Networks. If you wish to connect to <a href="https://hub.docker.com/r/oasisprotocol/emerald-dev" target="_blank" rel="noopener noreferrer">emerald-dev</a> container, configure
the local network as well.</p><p>When you open Remix for the first time, it automatically creates an example
project. Let&#x27;s open one of the contracts and compile it in the &quot;Solidity
compiler&quot; tab.</p><p><img loading="lazy" alt="The initial example project in Remix - Ethereum IDE" src="/assets/images/remix1-400bc72123a178beea4c86d2ba9857cd.png" width="2219" height="1332" class="img_ev3q"></p><p><img loading="lazy" alt="Solidity compiler tab" src="/assets/images/remix2-66fd8dbfe9f2a299501f5f9c75bdd08d.png" width="2217" height="1338" class="img_ev3q"></p><p>Next, in the &quot;Deploy and Run Transactions&quot; tab, select the &quot;Injected Web3&quot;
environment. A MetaMask popup will appear and you will have to connect one or
more accounts with Remix. Once the connection succeeds, click on the &quot;Deploy&quot;
button. The MetaMask popup appears again and you will have to review the
transaction, the gas options and finally confirm the transaction.</p><p><img loading="lazy" alt="Metamask transaction confirmation" src="/assets/images/remix3-e2db0ab19df6a1aff70c68018b93e897.png" width="2219" height="1332" class="img_ev3q"></p><p>If everything goes well, your transaction will be deployed using the selected
account in the MetaMask and the corresponding Emerald Network.</p><p><img loading="lazy" alt="Successful contract deployment on Emerald Testnet with Remix" src="/assets/images/remix4-41183efd0966503c866863efba485d1c.png" width="2219" height="1332" class="img_ev3q"></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Sometimes the gas limit estimation function might compute a slightly lower
value from the required one. In this case, try increasing the gas limit
manually by 10% or 20%.</p></div></div><p>Congratulations! Now you can start developing your own smart contracts on the
Oasis Emerald blockchain! Should you have any questions, do not hesitate to
share them with us on the <a href="https://discord.gg/pJdWeVtmHT" target="_blank" rel="noopener noreferrer">#emerald-paratime Discord channel</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deployment-of-my-contract-timed-out-on-testnet-or-mainnet">Deployment of my contract timed out on Testnet or Mainnet<a class="hash-link" href="#deployment-of-my-contract-timed-out-on-testnet-or-mainnet" title="Direct link to heading">​</a></h3><p>Emerald validators, similar to Ethereum ones, order the execution of
transactions by gas price. When deploying a contract and the deployment times
out, first wait another few rounds to make sure that the contract will not be
deployed eventually.</p><p>Next, check that your <code>gasPrice</code> <strong>is at least 10 nROSE</strong> which is a minimum
required gas price on Emerald. This value should already be propagated
automatically by the web3 endpoint, but your deployment configuration might
have ignored it.</p><p>Finally, consider increasing the <code>gasPrice</code> parameter in Hardhat/Truffle config
files by a fraction (e.g. 10% or 20%). This will require more ROSE from your
wallet to deploy the contract, but you will also increase the chance of your
transaction being included in the block.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="execution-of-my-contract-failed-how-do-i-debug-what-went-wrong">Execution of my contract failed. How do I debug what went wrong?<a class="hash-link" href="#execution-of-my-contract-failed-how-do-i-debug-what-went-wrong" title="Direct link to heading">​</a></h3><p>If you are using Testnet or Mainnet, try to debug your transaction by finding
it on the Emerald block explorer (<a href="https://explorer.emerald.oasis.dev" target="_blank" rel="noopener noreferrer">Mainnet</a>, <a href="https://testnet.explorer.emerald.oasis.dev" target="_blank" rel="noopener noreferrer">Testnet</a>):</p><p><img loading="lazy" alt="Emerald block explorer showing a failed transaction" src="/assets/images/oasisscan1-024c1033c1ceeff4ca4f4294f544ce9c.png" width="2219" height="1332" class="img_ev3q"></p><p>In some cases, the transaction result on Emerald block explorer might be stuck
at <code>Error: (Awaiting internal transactions for reason)</code>. In this case or in
case of other Consensus layer ↔ ParaTime issues, try to find your Emerald
transaction on the Oasis Scan (<a href="https://oasisscan.com" target="_blank" rel="noopener noreferrer">Mainnet</a>, <a href="https://testnet.oasisscan.com" target="_blank" rel="noopener noreferrer">Testnet</a>) which is primarily a Consensus layer explorer, but offers
some introspection into ParaTime transactions as well. Once you find your
failed Emerald transaction, the <code>Status</code> field should contain a more verbose
error description, for example:</p><p><img loading="lazy" alt="Oasis Scan showing the Out of gas error for a transaction on Emerald" src="/assets/images/oasisscan2-00e68913dfa621eb7c5f170e3b2f6378.png" width="2219" height="1332" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="see-also">See also<a class="hash-link" href="#see-also" title="Direct link to heading">​</a></h2><a class="card padding--lg cardContainer_fWXF" href="/node/run-your-node/paratime-client-node"><h2 class="text--truncate cardTitle_rnsV" title="ParaTime Client Node">📄️<!-- --> <!-- -->ParaTime Client Node</h2><p class="text--truncate cardDescription_PWke" title="These instructions are for setting up a ParaTime client node which only observes ParaTime activity and can submit transactions. If you want to run a ParaTime node instead, see the instructions for running a ParaTime node. Similarly, if you want to run a validator or a non-validator node instead, see the instructions for running a validator node or instructions for running a non-validator node.">These instructions are for setting up a ParaTime client node which only observes ParaTime activity and can submit transactions. If you want to run a ParaTime node instead, see the instructions for running a ParaTime node. Similarly, if you want to run a validator or a non-validator node instead, see the instructions for running a validator node or instructions for running a non-validator node.</p></a><a class="card padding--lg cardContainer_fWXF" href="/node/web3"><h2 class="text--truncate cardTitle_rnsV" title="Web3 Gateway">📄️<!-- --> <!-- -->Web3 Gateway</h2><p class="text--truncate cardDescription_PWke" title="Web3 gateway for Emerald and Sapphire ParaTimes">Web3 gateway for Emerald and Sapphire ParaTimes</p></a></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/oasisprotocol/docs/edit/main/docs/dapp/emerald/writing-dapps-on-emerald.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-02-09T09:03:22.000Z">Feb 9, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/dapp/emerald/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Emerald ParaTime</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/dapp/emerald/integrating-band-oracle-smart-contract"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Integrating BAND oracle smart contract</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#oasis-consensus-layer-and-emerald-paratime" class="table-of-contents__link toc-highlight">Oasis Consensus Layer and Emerald ParaTime</a></li><li><a href="#testnet-and-mainnet" class="table-of-contents__link toc-highlight">Testnet and Mainnet</a></li><li><a href="#running-private-oasis-network-locally" class="table-of-contents__link toc-highlight">Running Private Oasis Network Locally</a></li><li><a href="#create-dapp-on-emerald-with-hardhat" class="table-of-contents__link toc-highlight">Create dApp on Emerald with Hardhat</a></li><li><a href="#create-dapp-on-emerald-with-truffle" class="table-of-contents__link toc-highlight">Create dApp on Emerald with Truffle</a></li><li><a href="#create-dapp-on-emerald-with-remix---ethereum-ide" class="table-of-contents__link toc-highlight">Create dApp on Emerald with Remix - Ethereum IDE</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#deployment-of-my-contract-timed-out-on-testnet-or-mainnet" class="table-of-contents__link toc-highlight">Deployment of my contract timed out on Testnet or Mainnet</a></li><li><a href="#execution-of-my-contract-failed-how-do-i-debug-what-went-wrong" class="table-of-contents__link toc-highlight">Execution of my contract failed. How do I debug what went wrong?</a></li></ul></li><li><a href="#see-also" class="table-of-contents__link toc-highlight">See also</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/pJdWeVtmHT" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Watch us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/channel/UC35UFPcZ2F1wjPxhPrSsESQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Oasis Protocol Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.df39c847.js"></script>
<script src="/assets/js/main.4ff8f277.js"></script>
</body>
</html>