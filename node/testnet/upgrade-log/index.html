<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-node/testnet/upgrade-log">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Upgrade Log | Oasis Network Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.oasis.io/node/testnet/upgrade-log"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Upgrade Log | Oasis Network Documentation"><meta data-rh="true" name="description" content="For each upgrade of the Testnet network, we are tracking important changes for"><meta data-rh="true" property="og:description" content="For each upgrade of the Testnet network, we are tracking important changes for"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.oasis.io/node/testnet/upgrade-log"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/node/testnet/upgrade-log" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/node/testnet/upgrade-log" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.03bfe953.css">
<link rel="preload" href="/assets/js/runtime~main.df39c847.js" as="script">
<link rel="preload" href="/assets/js/main.4ff8f277.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OPF Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="OPF Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Oasis Docs</b></a><a class="navbar__item navbar__link" href="/general/">Use Oasis</a><a class="navbar__item navbar__link" href="/get-involved/">Get Involved</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/node/">Run Node</a><a class="navbar__item navbar__link" href="/dapp/">Create dApp</a><a class="navbar__item navbar__link" href="/paratime/">Build ParaTime</a><a class="navbar__item navbar__link" href="/core/">Develop Core</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="GitHub repository" aria-label="GitHub repository"></a><a href="https://oasisprotocol.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-www-link" title="Oasis Protocol Foundation website" aria-label="Oasis Protocol Foundation website"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/node/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/node/mainnet/">Mainnet</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/mainnet/damask-upgrade">Damask Upgrade</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/node/mainnet/previous-upgrades">Previous Upgrades</a><button aria-label="Toggle the collapsible sidebar category &#x27;Previous Upgrades&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/mainnet/upgrade-log">Upgrade Log</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/node/testnet/">Testnet</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/node/testnet/upgrade-log">Upgrade Log</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/node/genesis-doc">Genesis Document</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/node/run-your-node">Run Your Node</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/node/run-your-node/prerequisites">Prerequisites</a><button aria-label="Toggle the collapsible sidebar category &#x27;Prerequisites&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/node/run-your-node/validator-node/">Validator Node</a><button aria-label="Toggle the collapsible sidebar category &#x27;Validator Node&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/non-validator-node">Non-validator Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/seed-node">Seed Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/archive-node">Archive Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/paratime-node">ParaTime Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/paratime-client-node">ParaTime Client Node</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/node/run-your-node/keymanager-node/">Key Manager Node</a><button aria-label="Toggle the collapsible sidebar category &#x27;Key Manager Node&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/ias-proxy">IAS Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/sentry-node">Sentry Node</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/node/run-your-node/maintenance">Maintenance</a><button aria-label="Toggle the collapsible sidebar category &#x27;Maintenance&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/node/run-your-node/advanced">Advanced</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node/run-your-node/troubleshooting">Troubleshooting</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/node/web3">Web3 Gateway</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Upgrade Log</h1><p>For each upgrade of the Testnet network, we are tracking important changes for
node operators&#x27; deployments.</p><p>They are enumerated and explained in this document.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2022-04-04-upgrade">2022-04-04 Upgrade<a class="hash-link" href="#2022-04-04-upgrade" title="Direct link to heading">​</a></h2><ul><li><strong>Upgrade height:</strong> upgrade is scheduled to happen at epoch <strong>15056</strong>.</li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>We expect the Testnet network to reach this epoch at around 2022-04-04 7:45 UTC.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="instructions">Instructions<a class="hash-link" href="#instructions" title="Direct link to heading">​</a></h3><ul><li><p>See <a href="/node/testnet/upgrade-log#before-upgrade">Before upgrade</a> section for required steps
to be done before upgrade.</p></li><li><p>(optional) Vote for the upgrade. On 2022-04-01, an upgrade proposal will be
proposed which (if accepted) will schedule the upgrade on epoch <strong>15056</strong>.
See the <a href="/node/run-your-node/validator-node/governance">Governance documentation</a>
for details on voting for proposals.</p></li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The upgrade proposal contains the <code>&quot;empty&quot;</code> upgrade handler whose only purpose
is allow specifying a no-op handler when submitting an upgrade proposal.</p></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>This is not dump &amp; restore upgrade</div><div class="admonitionContent_S0QG"><p>For this upgrade, <strong>do NOT wipe state</strong>. The new Oasis Core version expects
the synced state using Oasis Core 22.0.x all the way until the upgrade epoch.
Read <a href="/node/run-your-node/maintenance/handling-network-upgrades">Handling Network Upgrades</a> for more info.</p></div></div><ul><li>Once reaching the designated upgrade epoch, your node will stop and needs to
be upgraded to Oasis Core <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v22.1" target="_blank" rel="noopener noreferrer">22.1</a>.
After your node is upgraded to Oasis Core 22.1, restart it and wait for more
than 2/3+ of nodes by stake to do the same and the network starts again.</li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The Testnet&#x27;s genesis file and the genesis document&#x27;s hash will remain the same.</p></div></div><ul><li>If the nodes are running any ParaTimes, make sure you upgrade to the versions
published on the <a href="/node/testnet/">Testnet network parameters page</a>.</li></ul><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>ParaTime binaries for the Cipher ParaTime will be published at a later time due
to the additional offline signing step. If you are running <em>multiple</em> ParaTimes
on the same node, you should <em>disable</em> the Cipher ParaTime until the new version
is published.</p></div></div><ul><li>If you are running a Rosetta gateway, upgrade it to version <a href="https://github.com/oasisprotocol/oasis-rosetta-gateway/releases/tag/v2.2.0" target="_blank" rel="noopener noreferrer">2.2.0</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="before-upgrade">Before Upgrade<a class="hash-link" href="#before-upgrade" title="Direct link to heading">​</a></h3><p>This upgrade will upgrade <strong>Oasis Core</strong> to <strong>version <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v22.1" target="_blank" rel="noopener noreferrer">22.1</a></strong> which <strong>no longer
allows running Oasis Node</strong> (i.e. the <code>oasis-node</code> binary) <strong>as root</strong>
(effective user ID of 0).</p><p>Running network accessible services as the root user is extremely bad for
system security as a general rule. While it would be &quot;ok&quot; if we could drop
privileges, <code>syscall.AllThreadsSyscall</code> does not work if the binary uses <code>cgo</code>
at all.</p><p>Nothing in Oasis Node will ever require elevated privileges.
Attempting to run the <code>oasis-node</code> process as the root user will now terminate
immediately on startup.</p><p>While there may be specific circumstances where it is safe to run network
services with the effective user ID set to 0, the overwhelming majority of cases
where this is done is a misconfiguration.</p><p>If the previous behavior is required, the binary must be run in unsafe/debug
mode (via the intentionally undocumented flag), and <code>debug.allow_root</code> must also
be set.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2022-03-03-upgrade">2022-03-03 Upgrade<a class="hash-link" href="#2022-03-03-upgrade" title="Direct link to heading">​</a></h2><ul><li><strong>Upgrade height:</strong> upgrade is scheduled to happen at epoch <strong>14209.</strong></li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>We expect the Testnet network to reach this epoch at around 2022-03-03 12:45 UTC.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="instructions-1">Instructions<a class="hash-link" href="#instructions-1" title="Direct link to heading">​</a></h3><ul><li>(optional) Vote for the upgrade. On 2022-03-02, an upgrade proposal will be proposed which (if accepted) will schedule the upgrade on epoch <strong>14209.</strong> See the <a href="/node/run-your-node/validator-node/governance">Governance documentation</a> for details on voting for proposals.</li></ul><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>The upgrade proposal contains a non-existing upgrade handler and will be used to
coordinate the network shutdown, the rest of the upgrade is manual.</p></div></div><p>The following steps should be performed only after the network has reached the
upgrade network and has halted:</p><ul><li>Download the Testnet genesis file published in the <a href="https://github.com/oasisprotocol/testnet-artifacts/releases/tag/2022-03-03" target="_blank" rel="noopener noreferrer">Testnet 2022-03-03 release</a>.</li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Testnet state at epoch <strong>14209</strong> will be exported and migrated to a 22.0
compatible genesis file. The new genesis file will be published on the above
link soon after reaching the upgrade epoch.</p></div></div><ul><li>Replace the old genesis file with the new Testnet genesis file.
The <a href="#state-changes">state changes</a> are described and explained below.</li><li>Replace the old version of Oasis Node with version <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v22.0" target="_blank" rel="noopener noreferrer">22.0</a>.</li><li><a href="/node/run-your-node/maintenance/wiping-node-state#state-wipe-and-keep-node-identity">Wipe state</a>.</li><li>Perform any needed <a href="#configuration-changes">configuration changes</a> described below.</li><li>Start your node.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-changes">Configuration Changes<a class="hash-link" href="#configuration-changes" title="Direct link to heading">​</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>To see the full extent of the changes examine the <a href="https://github.com/oasisprotocol/oasis-core/blob/v22.0/CHANGELOG.md#220-2022-03-01" target="_blank" rel="noopener noreferrer">Change Log</a> of the 22.0 release.</p></div></div><p>If your node is currently configured to run a ParaTime, you need to perform some
additional steps.</p><p>The way ParaTime binaries are distributed has changed so that all required
artifacts are contained in a single archive called the Oasis Runtime Container
and have the <code>.orc</code> extension. Links to updated ParaTime binaries will be
published on the <a href="/node/testnet/">Testnet network parameters page</a> for their respective
ParaTimes.</p><p>The configuration is simplified as the <code>runtime.paths</code> now only needs to list
all of the supported <code>.orc</code> files (see below for an example).</p><p>Instead of separately configuring various roles for a node, there is now a
single configuration flag called <code>runtime.mode</code> which enables the correct roles
as needed. It should be set to one of the following values:</p><ul><li><code>none</code> (runtime support is disabled, only consensus layer is enabled)</li><li><code>compute</code> (node is participating as a runtime compute node for all the
configured runtimes)</li><li><code>keymanager</code> (node is participating as a keymanager node)</li><li><code>client</code> (node is a stateful runtime client)</li><li><code>client-stateless</code> (node is a stateless runtime client and connects to
remote nodes for any state queries)</li></ul><p>Nodes that have so far been participating as compute nodes should set the mode
to <code>compute</code> and nodes that have been participating as clients for querying
and transaction submission should set it to <code>client</code>.</p><p>The following configuration flags have been removed:</p><ul><li><code>runtime.supported</code> (existing <code>runtime.paths</code> is used instead)</li><li><code>worker.p2p.enabled</code> (now automatically set based on runtime mode)</li><li><code>worker.compute.enabled</code> (now set based on runtime mode)</li><li><code>worker.keymanager.enabled</code> (now set based on runtime mode)</li><li><code>worker.storage.enabled</code> (no longer needed)</li></ul><p>Also the <code>worker.client</code> option is no longer needed unless you are providing
consensus layer RPC services.</p><p>For example if your <em>previous</em> configuration looked like:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">runtime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">supported</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;000000000000000000000000000000000000000000000000000000000000beef&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">&quot;000000000000000000000000000000000000000000000000000000000000beef&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /path/to/runtime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">worker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... other settings omitted ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">compute</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">client</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12345</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">addresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xx.yy.zz.vv:12345&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">p2p</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12346</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">addresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xx.yy.zz.vv:12346&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <em>new</em> configuration should look like:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">runtime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> compute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /path/to/runtime.orc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">worker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... other settings omitted ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">p2p</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12346</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">addresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xx.yy.zz.vv:12346&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="state-changes">State Changes<a class="hash-link" href="#state-changes" title="Direct link to heading">​</a></h3><p>The following parts of the genesis document will be updated:</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>For a more detailed explanation of the parameters below, see the <a href="/node/genesis-doc#parameters">Genesis Document</a> docs.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="general"><strong>General</strong><a class="hash-link" href="#general" title="Direct link to heading">​</a></h3><ul><li><strong><code>height</code></strong> will be set to the height of the Testnet state dump + 1, i.e. <code>8535081</code>.</li><li><strong><code>genesis_time</code></strong> will be set to <code>2022-03-03T13:00:00Z</code>.</li><li><strong><code>chain_id</code></strong> will be set to <code>testnet-2022-03-03</code>.</li><li><strong><code>halt_epoch</code></strong> will be set to <code>24210</code> (more than 1 year from the upgrade).</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="registry"><strong>Registry</strong><a class="hash-link" href="#registry" title="Direct link to heading">​</a></h3><ul><li><strong><code>registry.runtimes</code></strong> list contains the registered runtimes&#x27; descriptors. In
this upgrade, all runtime descriptors will be migrated from version <code>2</code> to
version <code>3</code>.
The migration will be done automatically with the <code>oasis-node debug fix-genesis</code>
command.</li><li><strong><code>registry.suspended_runtimes</code></strong> list contains the suspended registered
runtimes&#x27; descriptors. In this upgrade, all runtime descriptors will be
migrated from version <code>2</code> to version <code>3</code>.
The migration will be done automatically with the <code>oasis-node debug fix-genesis</code>
command.</li><li>Inactive registered entities in <strong><code>registry.entities</code></strong> (and their
corresponding nodes in <strong><code>registry.nodes</code></strong>) that don&#x27;t pass the
<a href="/node/genesis-doc#node-and-paratime-token-thresholds">minimum staking thresholds</a> will be removed.
The removal will be done automatically with the <code>oasis-node debug fix-genesis</code>
command.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="root-hash"><strong>Root Hash</strong><a class="hash-link" href="#root-hash" title="Direct link to heading">​</a></h3><ul><li><strong><code>roothash.params.gas_costs.submit_msg</code></strong> is a new parameter that specifies
the cost for an submit message transaction. It will be set to <code>1000</code>.
This will be done automatically with the <code>oasis-node debug fix-genesis</code> command.</li><li><strong><code>roothash.params.max_in_runtime_messages</code></strong> is a new parameter that <em>TODO</em>.
It will be set to <code>128</code>.
This will be done automatically with the <code>oasis-node debug fix-genesis</code> command.</li><li><strong><code>roothash.runtime_state</code></strong> contains the state roots of the runtimes.
Empty fields will be omitted.
This will be done automatically with the <code>oasis-node debug fix-genesis</code> command.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="staking"><strong>Staking</strong><a class="hash-link" href="#staking" title="Direct link to heading">​</a></h3><ul><li><strong><code>staking.params.thresholds</code></strong> specifies the minimum number of tokens that
need to be staked in order for a particular entity or a particular type of node
to participate in the network.
The <code>node-storage</code> key is removed since Oasis Core 22.0+ removes separate
storage nodes (for more details, see: <a href="https://github.com/oasisprotocol/oasis-core/pull/4308" target="_blank" rel="noopener noreferrer">#4308</a>).
This will be done automatically with the <code>oasis-node debug fix-genesis</code> command.</li><li><strong><code>staking.params.min_transfer</code></strong> specifies the minimum number of tokens one
can transfer.
The value is set to 10,000,000 base units, or 0.01 TEST tokens.
This will be done automatically with the <code>oasis-node debug fix-genesis</code> command.</li><li><strong><code>staking.params.min_transact_balance</code></strong> specifies the minimum general balance
an account must have to be able to perform transactions on the network.
The value is set to 0 base units meaning this requirement is currently not
enforced.
This will be done automatically with the <code>oasis-node debug fix-genesis</code> command.</li><li><strong><code>staking.params.reward_schedule</code></strong> specifies the staking reward schedule
as an array with elements of the form:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;until&quot;: 14226,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;scale&quot;: &quot;1229&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>For example, this element specifies that the staking reward is 0.001229% per
epoch until epoch <code>14226</code>.
It will be set to the same schedule that is currently on used on the Mainnet.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="random-beacon"><strong>Random Beacon</strong><a class="hash-link" href="#random-beacon" title="Direct link to heading">​</a></h3><ul><li><strong><code>beacon.base</code></strong> is the network&#x27;s starting epoch. It will be set to the epoch
of Testnet&#x27;s state dump + 1, i.e. <code>14210</code>.</li><li><strong><code>beacon.params.backend</code></strong> configures the random beacon backend to use. It
will be set to <code>&quot;vrf&quot;</code> indicating that the beacon implementing a <em>TODO</em> should be used.</li><li><strong><code>beacon.params.vrf_parameters.alpha_hq_threshold</code></strong> is <em>TODO</em>.</li><li><strong><code>beacon.params.vrf_parameters.interval</code></strong> is <em>TODO</em>.</li><li><em>TODO</em></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="governance"><strong>Governance</strong><a class="hash-link" href="#governance" title="Direct link to heading">​</a></h3><p><em>TODO</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consensus"><strong>Consensus</strong><a class="hash-link" href="#consensus" title="Direct link to heading">​</a></h3><ul><li><strong><code>consensus.params.state_checkpoint_interval</code></strong> parameter controls the
interval (in blocks) on which state checkpoints should be taken. It will be
increased from <code>10000</code> to <code>100000</code> to improve nodes&#x27; performance since
computing checkpoints is I/O intensive.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2021-08-11-upgrade">2021-08-11 Upgrade<a class="hash-link" href="#2021-08-11-upgrade" title="Direct link to heading">​</a></h2><ul><li><strong>Upgrade height:</strong> upgrade is scheduled to happen at epoch <strong>8844.</strong></li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>We expect the Testnet network to reach this epoch at around 2021-08-11 08:50 UTC.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="proposed-parameter-changes">Proposed Parameter Changes<a class="hash-link" href="#proposed-parameter-changes" title="Direct link to heading">​</a></h3><p>The <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v21.2.8" target="_blank" rel="noopener noreferrer">Oasis Core 21.2.8</a> release contains the <a href="https://github.com/oasisprotocol/oasis-core/blob/v21.2.8/go/upgrade/migrations/consensus_parameters.go" target="_blank" rel="noopener noreferrer"><code>consensus-params-update-2021-08</code> upgrade handler</a> which will update the following parameters in the consensus layer:</p><ul><li><strong><code>staking.params.max_allowances</code> </strong> specifies the maximum number of allowances on account can store. It will be set to <code>16</code> (default value is <code>0</code>) to enable support for beneficiary allowances which are required to transfer tokens into a ParaTime. <em>Note that this has already been the case on Testnet since the</em> <a href="/node/testnet/upgrade-log#2021-06-23-upgrade"><em>2021-06-23 upgrade</em></a><em>.</em></li><li><strong><code>staking.params.gas_costs</code> </strong> , <strong><code>governance.params.gas_costs</code></strong> and <strong><code>roothash.params.gas_costs</code></strong> specify gas costs for various types of staking, governance and roothash transactions. Gas costs for transactions that were missing gas costs will be added.</li><li><strong><code>scheduler.params.max_validators</code></strong> is the maximum size of the consensus committee (i.e. the validator set). It will be increased to<code>110</code> (it was set to <code>100</code> previously).</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="instructions---before-upgrade-system-preparation">Instructions - Before Upgrade System Preparation<a class="hash-link" href="#instructions---before-upgrade-system-preparation" title="Direct link to heading">​</a></h3><ul><li>This upgrade will upgrade <strong>Oasis Core</strong> to version <strong>21.2.8</strong> which:<ul><li>Has a check that makes sure the <strong>file descriptor limit</strong> is set to an appropriately high value (at least 50000). While previous versions only warned in case the limit was set too low, this version will refuse to start. Follow the <a href="/node/run-your-node/prerequisites/system-configuration#file-descriptor-limit">File Descriptor Limit</a> documentation page for details on how to increase the limit on your system.</li></ul></li><li>Stop your node, replace the old version of Oasis Node with version <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v21.2.8" target="_blank" rel="noopener noreferrer">21.2.8</a> and restart your node.</li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Since Oasis Core 21.2.8 is otherwise compatible with the current consensus layer protocol, you may upgrade your Testnet node to this version at any time.</p></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>This is not dump &amp; restore upgrade</div><div class="admonitionContent_S0QG"><p>For this upgrade, <strong>do NOT wipe state</strong>.</p></div></div><ul><li>Once reaching the designated upgrade epoch, your node will stop and needs to be upgraded to Oasis Core <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v21.2.8" target="_blank" rel="noopener noreferrer">21.2.8</a>.<ul><li>If you upgraded your node to Oasis Core 21.2.8 before the upgrade epoch was reached, you only need to restart your node for the upgrade to proceed.</li><li>Otherwise, you need to upgrade your node to Oasis Core 21.2.8 first and then restart it.</li></ul></li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>If you use a process manager like <a href="https://github.com/systemd/systemd" target="_blank" rel="noopener noreferrer">systemd</a> or <a href="http://supervisord.org" target="_blank" rel="noopener noreferrer">Supervisor</a>, you can configure it to restart the Oasis Node automatically.</p></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The Testnet&#x27;s genesis file and the genesis document&#x27;s hash will remain the same.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2021-06-23-upgrade">2021-06-23 Upgrade<a class="hash-link" href="#2021-06-23-upgrade" title="Direct link to heading">​</a></h2><ul><li><strong>Upgrade height:</strong> upgrade is scheduled to happen at epoch <strong>7553.</strong></li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>We expect the Testnet network to reach this epoch at around 2021-06-23 14:30 UTC.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="instructions-2">Instructions<a class="hash-link" href="#instructions-2" title="Direct link to heading">​</a></h3><ul><li>See <a href="/node/testnet/upgrade-log#before-upgrade">Before upgrade</a> section for required steps to be done before upgrade.</li><li>(optional) Vote for the upgrade. On 2021-06-21, an upgrade proposal will be proposed which (if accepted) will schedule the upgrade on epoch <strong>7553.</strong> See the <a href="/node/run-your-node/validator-node/governance">Governance documentation</a> for details on voting for proposals.</li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The upgrade proposal contains the <code>&quot;consensus-max-allowances-16&quot;</code> upgrade handler whose only purpose is to set the<strong><code>staking.params.min_delegation</code></strong> consensus parameter to 16 (default value is 0) to enable support for beneficiary allowances which are required to transfer tokens into a ParaTime.</p></div></div><ul><li>Stop your node, replace the old version of Oasis Node with version <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v21.2.4" target="_blank" rel="noopener noreferrer">21.2.4</a> and restart your node.</li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Since Oasis Core 21.2.4 is otherwise compatible with the current consensus layer protocol, you may upgrade your Testnet node to this version at any time.</p></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>This is not dump &amp; restore upgrade</div><div class="admonitionContent_S0QG"><p>For this upgrade, <strong>do NOT wipe state</strong>.</p></div></div><ul><li>Once reaching the designated upgrade epoch, your node will stop and needs to be upgraded to Oasis Core <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v21.2.4" target="_blank" rel="noopener noreferrer">21.2.4</a>.<ul><li>If you upgraded your node to Oasis Core 21.2.4 before the upgrade epoch was reached, you only need to restart your node for the upgrade to proceed.</li><li>Otherwise, you need to upgrade your node to Oasis Core 21.2.4 first and then restart it.</li></ul></li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>If you use a process manager like <a href="https://github.com/systemd/systemd" target="_blank" rel="noopener noreferrer">systemd</a> or <a href="http://supervisord.org" target="_blank" rel="noopener noreferrer">Supervisor</a>, you can configure it to restart the Oasis Node automatically.</p></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The Testnet&#x27;s genesis file and the genesis document&#x27;s hash will remain the same.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="before-upgrade-1">Before upgrade<a class="hash-link" href="#before-upgrade-1" title="Direct link to heading">​</a></h3><p>This upgrade will upgrade Oasis Core to version <strong>21.2.x</strong> which includes the new <a href="https://github.com/dgraph-io/badger" target="_blank" rel="noopener noreferrer"><strong>BadgerDB</strong></a> <strong>v3</strong>.</p><p>Since BadgerDB&#x27;s on-disk format changed in v3, it requires on-disk state migration. The migration process is done automatically and makes the following steps:</p><ul><li><p>Upon startup, Oasis Node will start migrating all <code>&lt;DATA-DIR&gt;/**/*.badger.db</code> files (Badger v2 files) and start writing Badger v3 DB to files with the <code>.migrate</code> suffix.</p></li><li><p>If the migration fails in the middle, Oasis Node will delete all <code>&lt;DATA-DIR&gt;/**/*.badger.db.migrate</code> files the next time it starts and start the migration (of the remaining <code>&lt;DATA-DIR&gt;/**/*.badger.db</code></p><p>files) again.</p></li><li><p>If the migration succeeds, Oasis Node will append the <code>.backup</code> suffix to all <code>&lt;DATA-DIR&gt;/**/*.badger.db</code> files (Badger v2 files) and remove the <code>.migrate</code> suffix from all <code>&lt;DATA-DIR&gt;/**/*.badger.db.migrate</code> files (Badger v3 files).</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="extra-storage-requirements">Extra storage requirements<a class="hash-link" href="#extra-storage-requirements" title="Direct link to heading">​</a></h4><p>Your node will thus need to have extra storage space to store both the old and the new BadgerDB files.</p><p>To see estimate how much extra space the migration will need, use the <code>du</code> tool:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">shopt -s globstar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">du -h &lt;DATA-DIR&gt;/**/*.badger.db | sort -h -r</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is an example output from a Testnet node that uses <code>/srv/oasis/node</code> as the <code>&lt;DATA-DIR&gt;</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">6.3G    /srv/oasis/node/tendermint/data/blockstore.badger.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.7G    /srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1.4G    /srv/oasis/node/tendermint/data/state.badger.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">158M    /srv/oasis/node/persistent-store.badger.db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">164K    /srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">80K /srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints/4424334</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">80K /srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints/4423334</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">76K /srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints/4424334/fc815694d8219acb97fc0207a2159601df76df4d96802c147252ad0f2fd8a3f3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">76K /srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints/4423334/613e734e4ee4999bf71c3a190df13ea9d9b7d65af6a7fd8b2c9a477f2d052313</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">68K /srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints/4424334/fc815694d8219acb97fc0207a2159601df76df4d96802c147252ad0f2fd8a3f3/chunks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">68K /srv/oasis/node/tendermint/abci-state/mkvs_storage.badger.db/checkpoints/4423334/613e734e4ee4999bf71c3a190df13ea9d9b7d65af6a7fd8b2c9a477f2d052313/chunks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20K /srv/oasis/node/tendermint/data/evidence.badger.db</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>After you&#x27;ve confirmed your node is up and running, you can safely delete all the  <code>&lt;DATA-DIR&gt;/**/*.badger.db.backup</code> files.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="extra-memory-requirements">Extra memory requirements<a class="hash-link" href="#extra-memory-requirements" title="Direct link to heading">​</a></h4><p>BadgerDB v2 to v3 migration can use a number of Go routines to migrate different database files in parallel.</p><p>However, this comes with a memory cost. For larger database files, it might need up to 4 GB of RAM per database, so we recommend lowering the number of Go routines BadgerDB uses during migration (<code>badger.migrate.num_go_routines</code>) if your node has less than 8 GB of RAM.</p><p>If your node has less than 8 GB of RAM, set the number of Go routines BadgerDB uses during migration to 2 (default is 8) by adding the following to your node&#x27;s <code>config.yml</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># BadgerDB configuration.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">badger:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  migrate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Set the number of Go routines BadgerDB uses during migration to 2 to lower</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # the memory pressure during migration (at the expense of a longer migration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # time).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    num_go_routines: 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2021-04-13-upgrade">2021-04-13 Upgrade<a class="hash-link" href="#2021-04-13-upgrade" title="Direct link to heading">​</a></h2><ul><li><strong>Upgrade height:</strong> upgrade is scheduled to happen at epoch <strong>5662.</strong></li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>We expect the Testnet network to reach this epoch at around 2021-04-13 12:00 UTC.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="instructions-3">Instructions<a class="hash-link" href="#instructions-3" title="Direct link to heading">​</a></h3><ul><li>Runtime operators see <a href="/node/testnet/upgrade-log#before-upgrade">Before upgrade</a> section for required steps to be done before upgrade.</li><li>(optional) Vote for the upgrade. On 2021-04-12 an upgrade proposal will be proposed which (if accepted) will schedule a network shutdown on epoch <strong>5662.</strong> See the <a href="/node/run-your-node/validator-node/governance">Governance documentation</a> for details on voting for proposals.</li></ul><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>The upgrade proposal contains a non-existing upgrade handler and will be used to coordinate the network shutdown, the rest of the upgrade is manual.</p></div></div><p>Following steps should be performed only after the network has reached the upgrade network and has halted:</p><ul><li>Download the Testnet genesis file published in the <a href="https://github.com/oasisprotocol/testnet-artifacts/releases/tag/2021-04-13" target="_blank" rel="noopener noreferrer">Testnet 2021-04-13 release</a>.</li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Testnet state at epoch <strong>5662</strong> will be exported and migrated to a 21.1.x compatible genesis file. Upgrade genesis file will be published on the above link soon after reaching the upgrade epoch.</p></div></div><ul><li>Replace the old genesis file with the new Testnet genesis file.</li><li>Replace the old version of Oasis Node with version <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v21.1" target="_blank" rel="noopener noreferrer">21.1</a>.</li><li><a href="/node/run-your-node/maintenance/wiping-node-state#state-wipe-and-keep-node-identity">Wipe state</a>.</li><li>Start your node.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="before-upgrade-2">Before upgrade<a class="hash-link" href="#before-upgrade-2" title="Direct link to heading">​</a></h3><p><strong>Runtime operators</strong></p><p>This upgrade requires a runtime storage node migration to be performed <strong>before the upgrade genesis is published</strong>. This can be done before the upgrade epoch is reached by stopping all runtime nodes and running the migration.</p><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p><strong>Backup your node&#x27;s data directory</strong></p><p>To prevent irrecoverable runtime storage data corruption/loss in case of a failed storage migration, backup your node&#x27;s data directory.</p><p>For example, to backup the <code>/serverdir/node</code> directory using the rsync tool, run:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rsync -a /serverdir/node/ /serverdir/node-BACKUP/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>The storage database on all storage nodes needs to be migrated with the following command (using the <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v21.1" target="_blank" rel="noopener noreferrer">21.1</a> binary):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node storage migrate \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --datadir &lt;NODE-DATADIR&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --runtime.supported &lt;RUNTIME-ID&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After the migration to v5 completes, you will see an output similar to:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- migrating from v4 to v5...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- migrating version 24468...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- migrated root state-root:195cf7a9a103e7300b2bb4e537cb9935cbebd83e448e67aa55433861a6ad7426 -&gt; state-root:cea105a5d701deab935b94af9e8e0c5af5dcdb61c242bf434da9f11aa8d110ba</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- migrated root io-root:0850c5a33ee7f45aa92724b7d5f28c9ac9ae8799b88cc5be9773e8aba9526ca7 -&gt; io-root:19713a2b44e1bf868ebee43c36872baa3058870bb890a5e25d1c4cea2622be77</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- migrated root io-root:477391131f60ac2c22bce9167c7e3783a13d4fb81fddd2d388b4ead6a586fe52 -&gt; io-root:f29f86d491303c5fd7b3572e97cbd65b7487b6b4ac519623afd161cc2e4678b7</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Take note of the displayed <code>state-root</code> and report it to the Foundation, as it needs to be included in the upgrade&#x27;s new genesis file. Keep the runtime nodes stopped until the upgrade epoch is reached. At upgrade epoch, upgrade the nodes by following the remaining steps above.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2021-03-24-upgrade">2021-03-24 Upgrade<a class="hash-link" href="#2021-03-24-upgrade" title="Direct link to heading">​</a></h2><ul><li><strong>Upgrade height:</strong> upgrade is scheduled to happen at epoch <strong>5128.</strong></li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>We expect the Testnet network to reach this epoch at around 2021-03-24 11:30 UTC.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="instructions-4">Instructions<a class="hash-link" href="#instructions-4" title="Direct link to heading">​</a></h3><ul><li><p>(optional) To ensure your node will stop at epoch <strong>5128</strong> <a href="/node/run-your-node/maintenance/handling-network-upgrades#stop-the-node-at-specific-epoch">submit the following upgrade descriptor</a> at any time before the upgrade:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;name&quot;: &quot;testnet-upgrade-2021-03-24&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;method&quot;: &quot;internal&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;identifier&quot;: &quot;testnet-upgrade-2021-03-24&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;epoch&quot;: 5128</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Download the Testnet genesis file published in the <a href="https://github.com/oasisprotocol/testnet-artifacts/releases/tag/2021-03-24" target="_blank" rel="noopener noreferrer">Testnet 2021-03-24 release</a>.</p></li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Testnet state at epoch <strong>5128</strong> will be exported and migrated to a 21.0.x compatible genesis file. Upgrade genesis file will be published on the above link soon after reaching the upgrade epoch.</p></div></div><ul><li>(optional) Verify the provided Testnet genesis file by comparing it to network state dump. See instructions in the <a href="/node/run-your-node/maintenance/handling-network-upgrades#download-and-verify-the-provided-genesis-file">Handling Network Upgrades</a> guide.</li><li>Replace the old genesis file with the new Testnet genesis file.</li><li>Stop your node (if you haven&#x27;t stopped it already by submitting the upgrade descriptor).</li><li>Replace the old version of Oasis Node with version <a href="https://github.com/oasisprotocol/oasis-core/releases/tag/v21.0.1" target="_blank" rel="noopener noreferrer">21.0.1</a>.</li><li>Update your node&#x27;s configuration or perform any additional needed steps as per <a href="/node/testnet/#additional-steps">Additional Steps</a> below.</li><li><a href="/node/run-your-node/maintenance/wiping-node-state#state-wipe-and-keep-node-identity">Wipe state</a>.</li><li>Start your node.</li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>For more detailed instructions, see the <a href="/node/run-your-node/maintenance/handling-network-upgrades">Handling Network Upgrades</a> guide.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="additional-steps">Additional steps<a class="hash-link" href="#additional-steps" title="Direct link to heading">​</a></h3><p>Examine the <a href="https://github.com/oasisprotocol/oasis-core/blob/v21.0.1/CHANGELOG.md#210-2021-03-18" target="_blank" rel="noopener noreferrer">Changelog</a> of the 21.0 release.</p><p><strong>Runtime operators</strong></p><p>In addition to some <a href="https://github.com/oasisprotocol/oasis-core/blob/v21.0.1/CHANGELOG.md#configuration-changes" target="_blank" rel="noopener noreferrer">configuration changes</a>, this upgrade contains breaking runtime API changes. Make sure any runtime code is updated and compatible with the 21.0.x runtime API version.</p><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p><strong>Backup your node&#x27;s data directory</strong></p><p>To prevent irrecoverable runtime storage data corruption/loss in case of a failed storage migration, backup your node&#x27;s data directory.</p><p>For example, to backup the <code>/serverdir/node</code> directory using the rsync tool, run:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rsync -a /serverdir/node/ /serverdir/node-BACKUP/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>For this upgrade, the runtime node operators need to perform an additional migration of the storage nodes. <strong>Before starting the upgraded node and before wiping state</strong>, the storage database on all storage nodes needs to be migrated with the following command (using the 21.0.1 binary):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node storage migrate \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --datadir &lt;NODE-DATADIR&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --runtime.supported &lt;RUNTIME-ID&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p><strong>Storage access policy changes</strong></p><p>Due to the changes in the default access policy on storage nodes, at least one of the storage nodes should be configured with the <code>worker.storage.public_rpc.enabled</code> flag set to <code>true</code>.</p><p>Otherwise, external runtime clients wont be able to connect to any storage nodes.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/oasisprotocol/docs/edit/main/docs/node/testnet/upgrade-log.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-02-09T09:03:22.000Z">Feb 9, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/node/testnet/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Testnet</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/node/genesis-doc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Genesis Document</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#2022-04-04-upgrade" class="table-of-contents__link toc-highlight">2022-04-04 Upgrade</a><ul><li><a href="#instructions" class="table-of-contents__link toc-highlight">Instructions</a></li><li><a href="#before-upgrade" class="table-of-contents__link toc-highlight">Before Upgrade</a></li></ul></li><li><a href="#2022-03-03-upgrade" class="table-of-contents__link toc-highlight">2022-03-03 Upgrade</a><ul><li><a href="#instructions-1" class="table-of-contents__link toc-highlight">Instructions</a></li><li><a href="#configuration-changes" class="table-of-contents__link toc-highlight">Configuration Changes</a></li><li><a href="#state-changes" class="table-of-contents__link toc-highlight">State Changes</a></li><li><a href="#general" class="table-of-contents__link toc-highlight"><strong>General</strong></a></li><li><a href="#registry" class="table-of-contents__link toc-highlight"><strong>Registry</strong></a></li><li><a href="#root-hash" class="table-of-contents__link toc-highlight"><strong>Root Hash</strong></a></li><li><a href="#staking" class="table-of-contents__link toc-highlight"><strong>Staking</strong></a></li><li><a href="#random-beacon" class="table-of-contents__link toc-highlight"><strong>Random Beacon</strong></a></li><li><a href="#governance" class="table-of-contents__link toc-highlight"><strong>Governance</strong></a></li><li><a href="#consensus" class="table-of-contents__link toc-highlight"><strong>Consensus</strong></a></li></ul></li><li><a href="#2021-08-11-upgrade" class="table-of-contents__link toc-highlight">2021-08-11 Upgrade</a><ul><li><a href="#proposed-parameter-changes" class="table-of-contents__link toc-highlight">Proposed Parameter Changes</a></li><li><a href="#instructions---before-upgrade-system-preparation" class="table-of-contents__link toc-highlight">Instructions - Before Upgrade System Preparation</a></li></ul></li><li><a href="#2021-06-23-upgrade" class="table-of-contents__link toc-highlight">2021-06-23 Upgrade</a><ul><li><a href="#instructions-2" class="table-of-contents__link toc-highlight">Instructions</a></li><li><a href="#before-upgrade-1" class="table-of-contents__link toc-highlight">Before upgrade</a></li></ul></li><li><a href="#2021-04-13-upgrade" class="table-of-contents__link toc-highlight">2021-04-13 Upgrade</a><ul><li><a href="#instructions-3" class="table-of-contents__link toc-highlight">Instructions</a></li><li><a href="#before-upgrade-2" class="table-of-contents__link toc-highlight">Before upgrade</a></li></ul></li><li><a href="#2021-03-24-upgrade" class="table-of-contents__link toc-highlight">2021-03-24 Upgrade</a><ul><li><a href="#instructions-4" class="table-of-contents__link toc-highlight">Instructions</a></li><li><a href="#additional-steps" class="table-of-contents__link toc-highlight">Additional steps</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/pJdWeVtmHT" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Watch us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/channel/UC35UFPcZ2F1wjPxhPrSsESQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Oasis Protocol Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.df39c847.js"></script>
<script src="/assets/js/main.4ff8f277.js"></script>
</body>
</html>