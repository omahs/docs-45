<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-core/development-setup/deploying-a-runtime">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Deploying a Runtime | Oasis Network Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.oasis.io/core/development-setup/deploying-a-runtime"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Deploying a Runtime | Oasis Network Documentation"><meta data-rh="true" name="description" content="Before proceeding, make sure to look at the [prerequisites] required for running"><meta data-rh="true" property="og:description" content="Before proceeding, make sure to look at the [prerequisites] required for running"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.oasis.io/core/development-setup/deploying-a-runtime"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/core/development-setup/deploying-a-runtime" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/core/development-setup/deploying-a-runtime" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.03bfe953.css">
<link rel="preload" href="/assets/js/runtime~main.df39c847.js" as="script">
<link rel="preload" href="/assets/js/main.4ff8f277.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OPF Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="OPF Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Oasis Docs</b></a><a class="navbar__item navbar__link" href="/general/">Use Oasis</a><a class="navbar__item navbar__link" href="/get-involved/">Get Involved</a><a class="navbar__item navbar__link" href="/node/">Run Node</a><a class="navbar__item navbar__link" href="/dapp/">Create dApp</a><a class="navbar__item navbar__link" href="/paratime/">Build ParaTime</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/core/">Develop Core</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="GitHub repository" aria-label="GitHub repository"></a><a href="https://oasisprotocol.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-www-link" title="Oasis Protocol Foundation website" aria-label="Oasis Protocol Foundation website"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/core/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/core/development-setup">Development Setup</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/core/development-setup/build-environment-setup-and-building">Build Environment Setup and Building</a><button aria-label="Toggle the collapsible sidebar category &#x27;Build Environment Setup and Building&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/core/development-setup/running-tests-and-development-networks">Running Tests and Development Networks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Running Tests and Development Networks&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/development-setup/running-tests">Running Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/development-setup/oasis-net-runner">Local Network Runner</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/development-setup/single-validator-node-network">Single Validator Node Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/core/development-setup/deploying-a-runtime">Deploying a Runtime</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/core/high-level-components">High-Level Components</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/core/consensus/">Consensus Layer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Consensus Layer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/core/runtime/">Runtime Layer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Runtime Layer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/core/oasis-node">Oasis Node</a><button aria-label="Toggle the collapsible sidebar category &#x27;Oasis Node&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/core/common-functionality">Common Functionality</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/encoding">Encoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/crypto">Cryptography</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/core/authenticated-grpc">Protocols</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/mkvs">Merklized Key-Value Store (MKVS)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/core/processes">Processes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/release-process">Release Process</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/versioning">Versioning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/SECURITY">Security</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/oasis-core-ledger">Oasis Core Ledger</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/adrs">ADRs</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Deploying a Runtime</h1><p>Before proceeding, make sure to look at the <a href="/core/development-setup/prerequisites">prerequisites</a> required for running
an Oasis Core environment followed by <a href="/core/development-setup/building">build instructions</a> for the respective
environment (non-SGX or SGX), using the <a href="/core/development-setup/oasis-net-runner"><code>oasis-net-runner</code></a> and see <a href="/core/runtime/">runtime
documentation</a> for a general documentation on runtimes.</p><p>These instructions will show how to register and deploy a runtime node on a
local development network.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="provision-a-single-validator-node-network">Provision a Single Validator Node Network<a class="hash-link" href="#provision-a-single-validator-node-network" title="Direct link to heading">​</a></h2><p>Use the <a href="/core/development-setup/oasis-net-runner"><code>oasis-net-runner</code></a> to provision a validator node network without any
registered runtimes.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir /tmp/runtime-example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oasis-net-runner \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --basedir.no_temp_dir \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --basedir /tmp/runtime-example \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --fixture.default.node.binary go/oasis-node/oasis-node \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --fixture.default.setup_runtimes=false \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --fixture.default.deterministic_entities \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --fixture.default.fund_entities \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --fixture.default.num_entities 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The following steps should be run in a separate terminal window. To simplify the
instructions set up an <code>ADDR</code> environment variable pointing to the UNIX socket
exposed by the started node:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export ADDR=unix:/tmp/runtime-example/net-runner/network/validator-0/internal.sock</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Confirm the network is running by listing all registered entities:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node registry entity list -a $ADDR -v</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Should give output similar to:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;v&quot;:2,&quot;id&quot;:&quot;JTUtHd4XYQjh//e6eYU7Pa/XMFG88WE+jixvceIfWrk=&quot;,&quot;nodes&quot;:[&quot;LQu4ZtFg8OJ0MC4M4QMeUR7Is6Xt4A/CW+PK/7TPiH0=&quot;]}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;v&quot;:2,&quot;id&quot;:&quot;+MJpnSTzc11dNI5emMa+asCJH5cxBiBCcpbYE4XBdso=&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;v&quot;:2,&quot;id&quot;:&quot;TqUyj5Q+9vZtqu10yw6Zw7HEX3Ywe0JQA9vHyzY47TU=&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In following steps we will register and run the <a href="https://github.com/oasisprotocol/oasis-core/tree/master/tests/runtimes/simple-keyvalue" target="_blank" rel="noopener noreferrer">simple-keyvalue</a> runtime on the
network.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="initializing-a-runtime">Initializing a Runtime<a class="hash-link" href="#initializing-a-runtime" title="Direct link to heading">​</a></h2><p>To generate and sign a runtime registration transaction that will initialize and
register the runtime we will use the <code>registry runtime gen_register</code> command.
When initializing a runtime we need to provide the runtime descriptor.</p><p>For additional information about runtimes and parameters see the <a href="/core/runtime/">runtime
documentation</a> and <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/registry/api?tab=doc#Runtime" target="_blank" rel="noopener noreferrer">code reference</a>.</p><p>Before generating the registration transaction, gather the following data and
set up environment variables to simplify instructions.</p><ul><li><code>ENTITY_DIR</code> - Path to the entity directory created when starting the
development network. This entity will be the runtime owner. The genesis used
in the provisioning initial network step funds the all entities in entities.
In the following instructions we will be using the <code>entity-2</code> entity (located
in <code>/tmp/runtime-example/net-runner/network/entity-2/</code> directory).</li><li><code>ENTITY_ID</code> - ID of the entity that will be the owner of the runtime. You can
get the entity ID from <code>$ENTITY_DIR/entity.json</code> file.</li><li><code>GENESIS_JSON</code> - Path to the genesis.json file used in the development
network. (defaults to:
<code>/tmp/runtime-example/net-runner/network/genesis.json</code>).</li><li><code>RUNTIME_ID</code> - See <a href="/core/runtime/identifiers">runtime identifiers</a> on how to choose a runtime
identifier. In this example we use
<code>8000000000000000000000000000000000000000000000000000000001234567</code> which is a
test identifier that will not work outside local tests.</li><li><code>RUNTIME_GENESIS_JSON</code> - Path to the runtime genesis state file. The runtime
used in this example does not use a genesis file.</li><li><code>NONCE</code> - Entity account nonce. If you followed the guide, nonce <code>0</code> would be
the initial nonce to use for the entity. Note: make sure to keep updating the
nonce when generating new transactions. To query for current account nonce
value use <a href="/core/oasis-node/cli#info">stake account info</a> CLI.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export ENTITY_DIR=/tmp/runtime-example/net-runner/network/entity-2/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export ENTITY_ID=+MJpnSTzc11dNI5emMa+asCJH5cxBiBCcpbYE4XBdso=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export GENESIS_JSON=/tmp/runtime-example/net-runner/network/genesis.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export RUNTIME_ID=8000000000000000000000000000000000000000000000000000000001234567</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export RUNTIME_DESCRIPTOR=/tmp/runtime-example/runtime_descriptor.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export NONCE=0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Prepare a runtime descriptor:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt; EOF &gt; &quot;${RUNTIME_DESCRIPTOR}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;v&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &quot;${RUNTIME_ID}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;entity_id&quot;: &quot;${ENTITY_ID}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;genesis&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;state_root&quot;: &quot;c672b8d1ef56ed28ab87c3622c5114069bdd3ad7b8f9737498d0c01ecef0967a&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;state&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;storage_receipts&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;round&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;kind&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;tee_hardware&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;versions&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;version&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;executor&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;group_size&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;group_backup_size&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allowed_stragglers&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;round_timeout&quot;: 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_messages&quot;: 32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;txn_scheduler&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;algorithm&quot;: &quot;simple&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;batch_flush_timeout&quot;: 1000000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_batch_size&quot;: 1000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_batch_size_bytes&quot;: 16777216,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;propose_batch_timeout&quot;: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;storage&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;group_size&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;min_write_replication&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_apply_write_log_entries&quot;: 100000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_apply_ops&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;checkpoint_interval&quot;: 10000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;checkpoint_num_kept&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;checkpoint_chunk_size&quot;: 8388608</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;admission_policy&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;entity_whitelist&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;entities&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;${ENTITY_ID}&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;staking&quot;: {},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;governance_model&quot;: &quot;entity&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node registry runtime gen_register \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.fee.gas 1000 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.fee.amount 0 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.file /tmp/runtime-example/register_runtime.tx \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.nonce $NONCE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --genesis.file $GENESIS_JSON \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --signer.backend file \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --signer.dir $ENTITY_DIR \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --runtime.descriptor /tmp/runtime-example/runtime-descriptor.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --debug.dont_blame_oasis \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --debug.allow_test_keys</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After confirmation, this command outputs a signed transaction in the
<code>/tmp/runtime-example/register_runtime.tx</code> file. In the next step we will submit
the transaction to complete the runtime registration.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>When registering a runtime on a <em>non-development</em> network you will likely want
to modify default parameters. Additionally, since we are running this on a debug
network, we had to enable the <code>debug.dont_blame_oasis</code> and
<code>debug.allow_test_keys</code> flags.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="submitting-the-runtime-register-transaction">Submitting the Runtime Register Transaction<a class="hash-link" href="#submitting-the-runtime-register-transaction" title="Direct link to heading">​</a></h2><p>To register the runtime, submit the generated transaction.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node consensus submit_tx \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --transaction.file /tmp/runtime-example/register_runtime.tx \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --address $ADDR</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="confirm-runtime-is-registered">Confirm Runtime is Registered<a class="hash-link" href="#confirm-runtime-is-registered" title="Direct link to heading">​</a></h2><p>To confirm the runtime is registered use the <code>registry runtime list</code> command.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node registry runtime list \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --verbose \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --include_suspended \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --address $ADDR</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Should give output similar to</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;v&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &quot;8000000000000000000000000000000000000000000000000000000001234567&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;entity_id&quot;: &quot;+MJpnSTzc11dNI5emMa+asCJH5cxBiBCcpbYE4XBdso=&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;genesis&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;state_root&quot;: &quot;c672b8d1ef56ed28ab87c3622c5114069bdd3ad7b8f9737498d0c01ecef0967a&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;state&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;storage_receipts&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;round&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;kind&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;tee_hardware&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;versions&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;version&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;executor&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;group_size&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;group_backup_size&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allowed_stragglers&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;round_timeout&quot;: 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_messages&quot;: 32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;txn_scheduler&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;algorithm&quot;: &quot;simple&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;batch_flush_timeout&quot;: 1000000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_batch_size&quot;: 1000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_batch_size_bytes&quot;: 16777216,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;propose_batch_timeout&quot;: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;storage&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;group_size&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;min_write_replication&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_apply_write_log_entries&quot;: 100000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_apply_ops&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;checkpoint_interval&quot;: 10000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;checkpoint_num_kept&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;checkpoint_chunk_size&quot;: 8388608</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;admission_policy&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;entity_whitelist&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;entities&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;+MJpnSTzc11dNI5emMa+asCJH5cxBiBCcpbYE4XBdso=&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;staking&quot;: {},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;governance_model&quot;: &quot;entity&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Since we did not setup any runtime nodes, the runtime
will get <a href="/core/runtime/#suspending-runtimes">suspended</a> until nodes for the runtime register.</p></div></div><p>In the next step we will setup and run a runtime node.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-a-runtime-node">Running a Runtime Node<a class="hash-link" href="#running-a-runtime-node" title="Direct link to heading">​</a></h2><p>We will now run a node that will act as a compute, storage and client node for
the runtime.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>In a real word scenario there would be multiple nodes
running the runtime, each likely serving as a single type only.</p></div></div><p>Before running the node, gather the following data parameters and set up
environment variables to simplify instructions.</p><ul><li><code>RUNTIME_BINARY</code> - Path to the runtime binary that will be run on the node. We
will use the <a href="https://github.com/oasisprotocol/oasis-core/tree/master/tests/runtimes/simple-keyvalue" target="_blank" rel="noopener noreferrer">simple-keyvalue</a> runtime. If you followed the <a href="/core/development-setup/building">build
instructions</a> the built binary is available at
<code>./target/default/debug/simple-keyvalue</code>.</li><li><code>SEED_NODE_ADDRESS</code> - Address of the seed node in the development network.
Seed node address can be seen in the <code>oasis-net-runner</code> logs, when the network
is initially provisioned.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export RUNTIME_BINARY=/workdir/target/default/debug/simple-keyvalue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export SEED_NODE_ADDRESS=&lt;seed-node-tendermint-addr&gt;@127.0.0.1:20000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Runtime node data dir.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -m 0700 /tmp/runtime-example/runtime-node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Start runtime node.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --datadir /tmp/runtime-example/runtime-node \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --log.level debug \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --log.format json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --log.file /tmp/runtime-example/runtime-node/node.log \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --grpc.log.debug \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --worker.registration.entity $ENTITY_DIR/entity.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --genesis.file $GENESIS_JSON \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --worker.storage.enabled \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --worker.compute.enabled \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --runtime.provisioner unconfined \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --runtime.supported $RUNTIME_ID \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --runtime.paths $RUNTIME_ID=$RUNTIME_BINARY \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consensus.tendermint.debug.addr_book_lenient \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consensus.tendermint.debug.allow_duplicate_ip \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consensus.tendermint.p2p.seed $SEED_NODE_ADDRESS \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --debug.dont_blame_oasis \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --debug.allow_test_keys</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>This also enables unsafe debug-only flags which must never be used in a
production setting as they may result in node compromise.</p></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>When running a runtime node in a production setting, the
<code>worker.p2p.addresses</code> and <code>worker.client.addresses</code> flags need to be configured
as well.</p></div></div><p>Following steps should be run in a new terminal window.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="updating-entity-nodes">Updating Entity Nodes<a class="hash-link" href="#updating-entity-nodes" title="Direct link to heading">​</a></h2><p>Before the newly started runtime node can register itself as a runtime node, we
need to update the entity information in registry, to include the started node.</p><p>Before proceeding, gather the runtime node id and store it in a variable. If you
followed above instructions, the node id can be seen in
<code>/tmp/runtime-example/runtime-node/identity_pub.pem</code> (or using the <a href="/core/oasis-node/cli#status">node control
status command</a>).</p><p>Update the entity and generate a transaction that will update the registry
state.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># NOTE: this ID is not generated deterministically make sure to change the ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># with your node id.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export NODE_ID=NOPhD7UlMZBO8fNyo2xLFanlmvl+EmZ5s4mM2z9nEBg=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node registry entity update \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --signer.dir $ENTITY_DIR  \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --entity.node.id $NODE_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node registry entity gen_register \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --genesis.file $GENESIS_JSON \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --signer.backend file \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --signer.dir $ENTITY_DIR \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.file /tmp/runtime-example/update_entity.tx \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.fee.gas 2000 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.fee.amount 0 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transaction.nonce $NONCE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --debug.dont_blame_oasis \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --debug.allow_test_keys</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Submit the generated transaction:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node consensus submit_tx \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --transaction.file /tmp/runtime-example/update_entity.tx \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --address $ADDR</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Confirm the entity in the registry has been updated by querying the registry
state:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node registry entity list -a $ADDR -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;v&quot;:1,&quot;id&quot;:&quot;JTUtHd4XYQjh//e6eYU7Pa/XMFG88WE+jixvceIfWrk=&quot;,&quot;nodes&quot;:[&quot;LQu4ZtFg8OJ0MC4M4QMeUR7Is6Xt4A/CW+PK/7TPiH0=&quot;]}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;v&quot;:1,&quot;id&quot;:&quot;+MJpnSTzc11dNI5emMa+asCJH5cxBiBCcpbYE4XBdso=&quot;,&quot;nodes&quot;:[&quot;vWUfSmjrHSlN5tSSO3/Qynzx+R/UlwPV9u+lnodQ00c=&quot;]}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;v&quot;:1,&quot;id&quot;:&quot;TqUyj5Q+9vZtqu10yw6Zw7HEX3Ywe0JQA9vHyzY47TU=&quot;,&quot;allow_entity_signed_nodes&quot;:true}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Node is now able to register and the runtime should get resumed, make sure this
happens by querying the registry for runtimes:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Ensure node is registered</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node registry node list -a $ADDR -v | grep &quot;$NODE_ID&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Ensure runtime is resumed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oasis-node registry runtime list -a $ADDR -v</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>You might need to wait few seconds for an epoch
transition so that the node is registered and runtime gets resumed.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/oasisprotocol/oasis-core/edit/stable/22.2.x/docs/development-setup/deploying-a-runtime.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-11-25T23:25:50.000Z">Nov 25, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/core/development-setup/single-validator-node-network"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Single Validator Node Network</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/core/high-level-components"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">High-Level Components</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#provision-a-single-validator-node-network" class="table-of-contents__link toc-highlight">Provision a Single Validator Node Network</a></li><li><a href="#initializing-a-runtime" class="table-of-contents__link toc-highlight">Initializing a Runtime</a></li><li><a href="#submitting-the-runtime-register-transaction" class="table-of-contents__link toc-highlight">Submitting the Runtime Register Transaction</a></li><li><a href="#confirm-runtime-is-registered" class="table-of-contents__link toc-highlight">Confirm Runtime is Registered</a></li><li><a href="#running-a-runtime-node" class="table-of-contents__link toc-highlight">Running a Runtime Node</a></li><li><a href="#updating-entity-nodes" class="table-of-contents__link toc-highlight">Updating Entity Nodes</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/pJdWeVtmHT" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Watch us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/channel/UC35UFPcZ2F1wjPxhPrSsESQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Oasis Protocol Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.df39c847.js"></script>
<script src="/assets/js/main.4ff8f277.js"></script>
</body>
</html>