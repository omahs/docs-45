<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-core/consensus/services/staking">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Staking | Oasis Network Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.oasis.io/core/consensus/services/staking"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Staking | Oasis Network Documentation"><meta data-rh="true" name="description" content="The staking service is responsible for managing the staking ledger in the"><meta data-rh="true" property="og:description" content="The staking service is responsible for managing the staking ledger in the"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.oasis.io/core/consensus/services/staking"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/core/consensus/services/staking" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.oasis.io/core/consensus/services/staking" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.03bfe953.css">
<link rel="preload" href="/assets/js/runtime~main.df39c847.js" as="script">
<link rel="preload" href="/assets/js/main.4ff8f277.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OPF Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="OPF Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Oasis Docs</b></a><a class="navbar__item navbar__link" href="/general/">Use Oasis</a><a class="navbar__item navbar__link" href="/get-involved/">Get Involved</a><a class="navbar__item navbar__link" href="/node/">Run Node</a><a class="navbar__item navbar__link" href="/dapp/">Create dApp</a><a class="navbar__item navbar__link" href="/paratime/">Build ParaTime</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/core/">Develop Core</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="GitHub repository" aria-label="GitHub repository"></a><a href="https://oasisprotocol.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-www-link" title="Oasis Protocol Foundation website" aria-label="Oasis Protocol Foundation website"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/core/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/core/development-setup">Development Setup</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/core/development-setup/build-environment-setup-and-building">Build Environment Setup and Building</a><button aria-label="Toggle the collapsible sidebar category &#x27;Build Environment Setup and Building&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/core/development-setup/running-tests-and-development-networks">Running Tests and Development Networks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Running Tests and Development Networks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/core/high-level-components">High-Level Components</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/core/consensus/">Consensus Layer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Consensus Layer&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/transactions">Transactions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/core/consensus/services">Services</a><button aria-label="Toggle the collapsible sidebar category &#x27;Services&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/epochtime">Epoch Time</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/beacon">Random Beacon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/core/consensus/services/staking">Staking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/registry">Registry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/scheduler">Committee Scheduler</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/governance">Governance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/roothash">Root Hash</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/services/keymanager">Key Manager</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/genesis">Genesis Document</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/consensus/test-vectors">Transaction Test Vectors</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/core/runtime/">Runtime Layer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Runtime Layer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/core/oasis-node">Oasis Node</a><button aria-label="Toggle the collapsible sidebar category &#x27;Oasis Node&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/core/common-functionality">Common Functionality</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/encoding">Encoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/crypto">Cryptography</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/core/authenticated-grpc">Protocols</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/mkvs">Merklized Key-Value Store (MKVS)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/core/processes">Processes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/release-process">Release Process</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/versioning">Versioning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/SECURITY">Security</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/oasis-core-ledger">Oasis Core Ledger</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/adrs">ADRs</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Staking</h1><p>The staking service is responsible for managing the staking ledger in the
consensus layer. It enables operations like transferring stake between accounts
and escrowing stake for specific needs (e.g., operating nodes).</p><p>The service interface definition lives in <a href="https://github.com/oasisprotocol/oasis-core/tree/master/go/staking/api/api.go" target="_blank" rel="noopener noreferrer"><code>go/staking/api</code></a>. It defines the
supported queries and transactions. For more information you can also check out
the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc" target="_blank" rel="noopener noreferrer">consensus service API documentation</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tokens-and-base-units">Tokens and Base Units<a class="hash-link" href="#tokens-and-base-units" title="Direct link to heading">​</a></h2><p>Stake amounts can be denominated in tokens and base units.</p><p>Tokens are used in user-facing scenarios (e.g. CLI commands) where the token
amount is prefixed with the token&#x27;s ticker symbol as defined by the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#Genesis" target="_blank" rel="noopener noreferrer"><code>Genesis</code>&#x27;
<code>TokenSymbol</code> field</a>.</p><p>Another <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#Genesis" target="_blank" rel="noopener noreferrer"><code>Genesis</code>&#x27; field, <code>TokenValueExponent</code></a>, defines the
token&#x27;s value base-10 exponent.
For example, if <code>TokenValueExponent</code> is 6, then 1 token equals 10^6 (i.e. one
million) base units.</p><p>Internally, base units are used for all stake calculation and processing.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="accounts">Accounts<a class="hash-link" href="#accounts" title="Direct link to heading">​</a></h2><p>A staking account is an entry in the staking ledger. It can hold both general
and escrow accounts.</p><p>Each staking account has an address which is derived from the corresponding
public key as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[ 1 byte &lt;ctx-version&gt; ][ first 20 bytes of SHA512-256(&lt;ctx-identifier&gt; || &lt;ctx-version&gt; || &lt;data&gt;) ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where <code>&lt;ctx-version&gt;</code> and <code>&lt;ctx-identifier&gt;</code> represent the staking account
address&#x27; context version and identifier and <code>&lt;data&gt;</code> represents the data
specific to the address kind.</p><p>There are two kinds of accounts:</p><ul><li>User accounts linked to a specific public key.</li><li>Runtime accounts linked to a specific <a href="/core/runtime/identifiers">runtime identifier</a>.</li></ul><p>Addresses use <a href="https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki#bech32" target="_blank" rel="noopener noreferrer">Bech32 encoding</a> for text serialization with <code>oasis</code> as its human
readable part (HRP) prefix (for both kinds of accounts).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="user-accounts">User Accounts<a class="hash-link" href="#user-accounts" title="Direct link to heading">​</a></h3><p>In case of user accounts, the <code>&lt;ctx-version&gt;</code> and <code>&lt;ctx-identifier&gt;</code> are as
defined by the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#pkg-variables" target="_blank" rel="noopener noreferrer"><code>AddressV0Context</code> variable</a>, and <code>&lt;data&gt;</code> represents the
account signer&#x27;s public key (e.g. entity id).</p><p>For more details, see the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewAddress" target="_blank" rel="noopener noreferrer"><code>NewAddress</code> function</a>.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>When generating an account&#x27;s private/public key pair, follow <a href="/adrs/0008-standard-account-key-generation">ADR 0008:
Standard Account Key Generation</a>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtime-accounts">Runtime Accounts<a class="hash-link" href="#runtime-accounts" title="Direct link to heading">​</a></h3><p>In case of runtime accounts, the <code>&lt;ctx-version&gt;</code> and <code>&lt;ctx-identifier&gt;</code> are as
defined by the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#pkg-variables" target="_blank" rel="noopener noreferrer"><code>AddressRuntimeV0Context</code> variable</a>, and <code>&lt;data&gt;</code> represents the
<a href="/core/runtime/identifiers">runtime identifier</a>.</p><p>For more details, see the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewRuntimeAddress" target="_blank" rel="noopener noreferrer"><code>NewRuntimeAddress</code> function</a>.</p><p>The runtime accounts belong to runtimes and can only be manipulated by the
runtime by <a href="/core/runtime/messages">emitting messages</a> to the consensus layer.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reserved-addresses">Reserved Addresses<a class="hash-link" href="#reserved-addresses" title="Direct link to heading">​</a></h3><p>Some staking account addresses are reserved to prevent them from being
accidentally used in the actual ledger.</p><p>Currently, they are:</p><ul><li><code>oasis1qrmufhkkyyf79s5za2r8yga9gnk4t446dcy3a5zm</code>: common pool address
(defined by <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#pkg-variables" target="_blank" rel="noopener noreferrer"><code>CommonPoolAddress</code> variable</a>).</li><li><code>oasis1qqnv3peudzvekhulf8v3ht29z4cthkhy7gkxmph5</code>: per-block fee accumulator
address (defined by <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#pkg-variables" target="_blank" rel="noopener noreferrer"><code>FeeAccumulatorAddress</code> variable</a>).</li><li><code>oasis1qp65laz8zsa9a305wxeslpnkh9x4dv2h2qhjz0ec</code>: governance deposits address
(defined by the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#pkg-variables" target="_blank" rel="noopener noreferrer"><code>GovernanceDeposits</code> variable</a>).</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="general">General<a class="hash-link" href="#general" title="Direct link to heading">​</a></h3><p>General accounts store account&#x27;s general balance and nonce.
Nonce is the incremental number that must be unique for each account&#x27;s
transaction.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="escrow">Escrow<a class="hash-link" href="#escrow" title="Direct link to heading">​</a></h3><p>Escrow accounts are used to hold stake delegated for specific consensus-layer
operations (e.g., registering and running nodes).
Their balance is subject to special delegation provisions and a debonding
period.</p><p>Delegation provisions, also called commissions, are specified by the
<a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#CommissionSchedule" target="_blank" rel="noopener noreferrer"><code>CommissionSchedule</code> field</a>.</p><p>An escrow account also has a corresponding stake accumulator.
It stores stake claims for an escrow account and ensures all claims are
satisfied at any given point.
Adding a new claim is only possible if all of the existing claims plus the new
claim can be satisfied.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="delegation">Delegation<a class="hash-link" href="#delegation" title="Direct link to heading">​</a></h4><p>When a delegator wants to delegate some of amount of stake to a staking account,
he needs to escrow stake using <a href="#add-escrow">Add Escrow method</a>.</p><p>Similarly, when a delegator wants to reclaim some amount of escrowed stake back
to his general account, he needs to reclaim stake using <a href="#reclaim-escrow">Reclaim Escrow method</a>.</p><p>To simplify accounting, each escrow results in the delegator account being
issued shares which can be converted back to stake during the reclaim escrow
operation.</p><p>When a delegator delegates some amount of stake to an escrow account, the
delegator receives the number of shares proportional to the current
<em>share price</em> (in base units) calculated from the total number of stake
delegated to an escrow account so far and the number of shares issued so far:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">shares_per_base_unit = account_issued_shares / account_delegated_base_units</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For example, if an escrow account has the following state:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">&quot;escrow&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;active&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;balance&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;250&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;total_shares&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>then the current share price (i.e. <code>shares_per_base_unit</code>) is 1000 / 250 = 4.</p><p>Delegating 500 base units to this escrow account would result in 500 * 4 = 2000
newly issued shares.</p><p>Thus, the escrow account would have the following state afterwards:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">&quot;escrow&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;active&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;balance&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;750&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;total_shares&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When a delegator wants to reclaim a certain number of escrowed stake, the
<em>base unit price</em> (in shares) must be calculated based on the escrow account&#x27;s
current active balance and the number of issued shares:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">base_units_per_share = account_delegated_base_units / account_issued_shares</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Returning to our example escrow account, the current base unit price (i.e.
<code>base_units_per_share</code>) is 750 / 3000 = 0.25.</p><p>Reclaiming 1200 shares would result in 1200 * 0.25 = 300 base units being
reclaimed.</p><p>The escrow account would have the following state afterwards:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">&quot;escrow&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;active&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;balance&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;450&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;total_shares&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1800&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Reclaiming escrow does not complete immediately, but may be subject to a
debonding period during in which the stake still remains escrowed.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="commission-schedule">Commission Schedule<a class="hash-link" href="#commission-schedule" title="Direct link to heading">​</a></h4><p>A staking account can be configured to take a commission on staking rewards
given to its node(s). They are defined by the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#CommissionRateStep" target="_blank" rel="noopener noreferrer"><code>CommissionRateStep</code> type</a>.</p><p>The commission rate must be within bounds, which the staking account can also
specify using the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#CommissionRateBoundStep" target="_blank" rel="noopener noreferrer"><code>CommissionRateBoundStep</code> type</a>.</p><p>The commission rates and rate bounds can change over time which is defined
by the <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#CommissionSchedule" target="_blank" rel="noopener noreferrer"><code>CommissionSchedule</code> type</a>.</p><p>To prevent unexpected changes in commission rates and rate bounds, they must
be specified a number of epochs in the future, controlled by the
<a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#CommissionScheduleRules" target="_blank" rel="noopener noreferrer"><code>CommissionScheduleRules</code> consensus parameter</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="methods">Methods<a class="hash-link" href="#methods" title="Direct link to heading">​</a></h2><p>The following sections describe the methods supported by the consensus staking
service.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transfer">Transfer<a class="hash-link" href="#transfer" title="Direct link to heading">​</a></h3><p>Transfer enables stake transfer between different accounts in the staking
ledger. A new transfer transaction can be generated using
<a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewTransferTx" target="_blank" rel="noopener noreferrer"><code>NewTransferTx</code> function</a>.</p><p><strong>Method name:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.Transfer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Transfer struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    To     Address           `json:&quot;to&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Amount quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>to</code> specifies the destination account&#x27;s address.</li><li><code>amount</code> specifies the amount of base units to transfer.</li></ul><p>The transaction signer implicitly specifies the source account.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="burn">Burn<a class="hash-link" href="#burn" title="Direct link to heading">​</a></h3><p>Burn destroys some stake in the caller&#x27;s account. A new burn transaction can be
generated using <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewBurnTx" target="_blank" rel="noopener noreferrer"><code>NewBurnTx</code> function</a>.</p><p><strong>Method name:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.Burn</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Burn struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Amount quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>amount</code> specifies the amount of base units to burn.</li></ul><p>The transaction signer implicitly specifies the caller&#x27;s account.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-escrow">Add Escrow<a class="hash-link" href="#add-escrow" title="Direct link to heading">​</a></h3><p>Escrow transfers stake into an escrow account.
For more details, see the <a href="#delegation">Delegation section</a> of this document.
A new add escrow transaction can be generated using <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewAddEscrowTx" target="_blank" rel="noopener noreferrer"><code>NewAddEscrowTx</code> function</a>.</p><p><strong>Method name:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.AddEscrow</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Escrow struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Account Address           `json:&quot;account&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Amount  quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>account</code> specifies the destination escrow account&#x27;s address.</li><li><code>amount</code> specifies the amount of base units to transfer.</li></ul><p>The transaction signer implicitly specifies the source account.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reclaim-escrow">Reclaim Escrow<a class="hash-link" href="#reclaim-escrow" title="Direct link to heading">​</a></h3><p>Reclaim escrow starts the escrow reclamation process.
For more details, see the <a href="#delegation">Delegation section</a> of this document.
A new reclaim escrow transaction can be generated using
<a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewReclaimEscrowTx" target="_blank" rel="noopener noreferrer"><code>NewReclaimEscrowTx</code> function</a>.</p><p><strong>Method name:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.ReclaimEscrow</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type ReclaimEscrow struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Account Address           `json:&quot;account&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Shares  quantity.Quantity `json:&quot;shares&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>account</code> specifies the source escrow account&#x27;s address.</li><li><code>shares</code> specifies the number of shares to reclaim.</li></ul><p>The transaction signer implicitly specifies the destination account.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="amend-commission-schedule">Amend Commission Schedule<a class="hash-link" href="#amend-commission-schedule" title="Direct link to heading">​</a></h3><p>Amend commission schedule updates the commission schedule specified for the
given escrow account.
For more details, see the <a href="#commission-schedule">Commission Schedule section</a> of this document.
A new amend commission schedule transaction can be
generated using <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewAmendCommissionScheduleTx" target="_blank" rel="noopener noreferrer"><code>NewAmendCommissionScheduleTx</code> function</a>.</p><p><strong>Method name:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.AmendCommissionSchedule</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type AmendCommissionSchedule struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Amendment CommissionSchedule `json:&quot;amendment&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>amendment</code> defines the amended commission schedule.</li></ul><p>The transaction signer implicitly specifies the escrow account.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="allow">Allow<a class="hash-link" href="#allow" title="Direct link to heading">​</a></h3><p>Allow enables an account holder to set an allowance for a beneficiary. A new
allow transaction can be generated using <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewAllowTx" target="_blank" rel="noopener noreferrer"><code>NewAllowTx</code> function</a>.</p><p><strong>Method name:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.Allow</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Allow struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Beneficiary  Address           `json:&quot;beneficiary&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Negative     bool              `json:&quot;negative,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AmountChange quantity.Quantity `json:&quot;amount_change&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>beneficiary</code> specifies the beneficiary account address.</li><li><code>amount_change</code> specifies the absolute value of the amount of base units to
change the allowance for.</li><li><code>negative</code> specifies whether the <code>amount_change</code> should be subtracted instead
of added.</li></ul><p>The transaction signer implicitly specifies the general account. Upon executing
the allow the following actions are performed:</p><ul><li><p>If either the <code>disable_transfers</code> staking consensus parameter is set to <code>true</code>
or the <code>max_allowances</code> staking consensus parameter is set to zero, the method
fails with <code>ErrForbidden</code>.</p></li><li><p>It is checked whether either the transaction signer address or the
<code>beneficiary</code> address are reserved. If any are reserved, the method fails with
<code>ErrForbidden</code>.</p></li><li><p>Address specified by <code>beneficiary</code> is compared with the transaction signer
address. If the addresses are the same, the method fails with
<code>ErrInvalidArgument</code>.</p></li><li><p>The account indicated by the signer is loaded.</p></li><li><p>If the allow would create a new allowance and the maximum number of allowances
for an account has been reached, the method fails with <code>ErrTooManyAllowances</code>.</p></li><li><p>The set of allowances is updated so that the allowance is updated as specified
by <code>amount_change</code>/<code>negative</code>. In case the change would cause the allowance to
be equal to zero or negative, the allowance is removed.</p></li><li><p>The account is saved.</p></li><li><p>The corresponding <a href="#allowance-change-event"><code>AllowanceChangeEvent</code></a> is emitted.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="withdraw">Withdraw<a class="hash-link" href="#withdraw" title="Direct link to heading">​</a></h3><p>Withdraw enables a beneficiary to withdraw from the given account. A new
withdraw transaction can be generated using <a href="https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/staking/api?tab=doc#NewWithdrawTx" target="_blank" rel="noopener noreferrer"><code>NewWithdrawTx</code> function</a>.</p><p><strong>Method name:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">staking.Withdraw</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type Withdraw struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    From   Address           `json:&quot;from&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Amount quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>from</code> specifies the account address to withdraw from.</li><li><code>amount</code> specifies the amount of base units to withdraw.</li></ul><p>The transaction signer implicitly specifies the destination general account.
Upon executing the withdrawal the following actions are performed:</p><ul><li><p>If either the <code>disable_transfers</code> staking consensus parameter is set to <code>true</code>
or the <code>max_allowances</code> staking consensus parameter is set to zero, the method
fails with <code>ErrForbidden</code>.</p></li><li><p>It is checked whether either the transaction signer address or the
<code>from</code> address are reserved. If any are reserved, the method fails with
<code>ErrForbidden</code>.</p></li><li><p>Address specified by <code>from</code> is compared with the transaction signer address.
If the addresses are the same, the method fails with <code>ErrInvalidArgument</code>.</p></li><li><p>The source account indicated by <code>from</code> is loaded.</p></li><li><p>The destination account indicated by the transaction signer is loaded.</p></li><li><p><code>amount</code> is deducted from the corresponding allowance in the source account.
If this would cause the allowance to go negative, the method fails with
<code>ErrForbidden</code>.</p></li><li><p><code>amount</code> is deducted from the source general account balance. If this would
cause the balance to go negative, the method fails with
<code>ErrInsufficientBalance</code>.</p></li><li><p><code>amount</code> is added to the destination general account balance.</p></li><li><p>Both source and destination accounts are saved.</p></li><li><p>The corresponding <a href="#transfer-event"><code>TransferEvent</code></a> is emitted.</p></li><li><p>The corresponding <a href="#allowance-change-event"><code>AllowanceChangeEvent</code></a> is emitted with the updated
allowance.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="events">Events<a class="hash-link" href="#events" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transfer-event">Transfer Event<a class="hash-link" href="#transfer-event" title="Direct link to heading">​</a></h3><p>The transfer event is emitted when tokens are transferred from a source account
to a destination account.</p><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type TransferEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  From   Address           `json:&quot;from&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  To     Address           `json:&quot;to&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Amount quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>from</code> contains the address of the source account.</li><li><code>to</code> contains the address of the destination account.</li><li><code>amount</code> contains the amount (in base units) transferred.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="burn-event">Burn Event<a class="hash-link" href="#burn-event" title="Direct link to heading">​</a></h3><p>The burn event is emitted when tokens are burned.</p><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type BurnEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Owner  Address           `json:&quot;owner&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Amount quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>owner</code> contains the address of the account that burned tokens.</li><li><code>amount</code> contains the amount (in base units) burned.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="escrow-event">Escrow Event<a class="hash-link" href="#escrow-event" title="Direct link to heading">​</a></h3><p>Escrow events are emitted when tokens are escrowed, taken from escrow by the
protocol or reclaimed from escrow by the account owner.</p><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type EscrowEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Add     *AddEscrowEvent     `json:&quot;add,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Take    *TakeEscrowEvent    `json:&quot;take,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Reclaim *ReclaimEscrowEvent `json:&quot;reclaim,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>add</code> is set if the emitted event is an <em>Add Escrow</em> event.</li><li><code>take</code> is set if the emitted event is a <em>Take Escrow</em> event.</li><li><code>reclaim</code> is set if the emitted event is a <em>Reclaim Escrow</em> event.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-escrow-event">Add Escrow Event<a class="hash-link" href="#add-escrow-event" title="Direct link to heading">​</a></h4><p>The add escrow event is emitted when funds are escrowed.</p><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type AddEscrowEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Owner     Address           `json:&quot;owner&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Escrow    Address           `json:&quot;escrow&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Amount    quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NewShares quantity.Quantity `json:&quot;new_shares&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>owner</code> contains the address of the source account.</li><li><code>escrow</code> contains the address of the destination account the tokens are being
escrowed to.</li><li><code>amount</code> contains the amount (in base units) escrowed.</li><li><code>new_shares</code> contains the amount of shares created as a result of the added
escrow event. Can be zero in case of (non-commissioned) rewards, where stake
is added without new shares to increase share price.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="take-escrow-event">Take Escrow Event<a class="hash-link" href="#take-escrow-event" title="Direct link to heading">​</a></h4><p>The take escrow event is emitted by the protocol when escrowed funds are
slashed for whatever reason.</p><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type TakeEscrowEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Owner  Address           `json:&quot;owner&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Amount quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>owner</code> contains the address of the account escrow has been taken from.</li><li><code>amount</code> contains the amount (in base units) taken.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="reclaim-escrow-event">Reclaim Escrow Event<a class="hash-link" href="#reclaim-escrow-event" title="Direct link to heading">​</a></h4><p>The reclaim escrow event is emitted when a reclaim escrow operation completes
successfully (after the debonding period has passed).</p><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type ReclaimEscrowEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Owner  Address           `json:&quot;owner&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Escrow Address           `json:&quot;escrow&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Amount quantity.Quantity `json:&quot;amount&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Shares quantity.Quantity `json:&quot;shares&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>owner</code> contains the address of the account that reclaimed tokens from escrow.</li><li><code>escrow</code> contains the address of the account escrow has been reclaimed from.</li><li><code>amount</code> contains the amount (in base units) reclaimed.</li><li><code>shares</code> contains the amount of shares reclaimed.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="allowance-change-event">Allowance Change Event<a class="hash-link" href="#allowance-change-event" title="Direct link to heading">​</a></h3><p><strong>Body:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type AllowanceChangeEvent struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Owner        Address           `json:&quot;owner&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Beneficiary  Address           `json:&quot;beneficiary&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Allowance    quantity.Quantity `json:&quot;allowance&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Negative     bool              `json:&quot;negative,omitempty&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AmountChange quantity.Quantity `json:&quot;amount_change&quot;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Fields:</strong></p><ul><li><code>owner</code> contains the address of the account owner where allowance has been
changed.</li><li><code>beneficiary</code> contains the address of the beneficiary.</li><li><code>allowance</code> contains the new total allowance.</li><li><code>amount_change</code> contains the absolute amount the allowance has changed for.</li><li><code>negative</code> specifies whether the allowance has been reduced rather than
increased.</li></ul><p>The event is emitted even if the new allowance is zero.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="consensus-parameters">Consensus Parameters<a class="hash-link" href="#consensus-parameters" title="Direct link to heading">​</a></h2><ul><li><code>max_allowances</code> (uint32) specifies the maximum number of <a href="#allow">allowances</a> an
account can store. Zero means that allowance functionality is disabled.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-vectors">Test Vectors<a class="hash-link" href="#test-vectors" title="Direct link to heading">​</a></h2><p>To generate test vectors for various staking <a href="/core/consensus/transactions">transactions</a>, run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> -C go staking/gen_vectors</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about the structure of the test vectors see the section
on <a href="/core/consensus/test-vectors">Transaction Test Vectors</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/oasisprotocol/oasis-core/edit/stable/22.2.x/docs/consensus/services/staking.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-11-25T23:25:50.000Z">Nov 25, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/core/consensus/services/beacon"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Random Beacon</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/core/consensus/services/registry"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Registry</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tokens-and-base-units" class="table-of-contents__link toc-highlight">Tokens and Base Units</a></li><li><a href="#accounts" class="table-of-contents__link toc-highlight">Accounts</a><ul><li><a href="#user-accounts" class="table-of-contents__link toc-highlight">User Accounts</a></li><li><a href="#runtime-accounts" class="table-of-contents__link toc-highlight">Runtime Accounts</a></li><li><a href="#reserved-addresses" class="table-of-contents__link toc-highlight">Reserved Addresses</a></li><li><a href="#general" class="table-of-contents__link toc-highlight">General</a></li><li><a href="#escrow" class="table-of-contents__link toc-highlight">Escrow</a></li></ul></li><li><a href="#methods" class="table-of-contents__link toc-highlight">Methods</a><ul><li><a href="#transfer" class="table-of-contents__link toc-highlight">Transfer</a></li><li><a href="#burn" class="table-of-contents__link toc-highlight">Burn</a></li><li><a href="#add-escrow" class="table-of-contents__link toc-highlight">Add Escrow</a></li><li><a href="#reclaim-escrow" class="table-of-contents__link toc-highlight">Reclaim Escrow</a></li><li><a href="#amend-commission-schedule" class="table-of-contents__link toc-highlight">Amend Commission Schedule</a></li><li><a href="#allow" class="table-of-contents__link toc-highlight">Allow</a></li><li><a href="#withdraw" class="table-of-contents__link toc-highlight">Withdraw</a></li></ul></li><li><a href="#events" class="table-of-contents__link toc-highlight">Events</a><ul><li><a href="#transfer-event" class="table-of-contents__link toc-highlight">Transfer Event</a></li><li><a href="#burn-event" class="table-of-contents__link toc-highlight">Burn Event</a></li><li><a href="#escrow-event" class="table-of-contents__link toc-highlight">Escrow Event</a></li><li><a href="#allowance-change-event" class="table-of-contents__link toc-highlight">Allowance Change Event</a></li></ul></li><li><a href="#consensus-parameters" class="table-of-contents__link toc-highlight">Consensus Parameters</a></li><li><a href="#test-vectors" class="table-of-contents__link toc-highlight">Test Vectors</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/pJdWeVtmHT" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Watch us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/channel/UC35UFPcZ2F1wjPxhPrSsESQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Oasis Protocol Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.df39c847.js"></script>
<script src="/assets/js/main.4ff8f277.js"></script>
</body>
</html>