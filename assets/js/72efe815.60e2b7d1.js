"use strict";(self.webpackChunkdocs_oasis_dev=self.webpackChunkdocs_oasis_dev||[]).push([[7954],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>y});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),d=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=d(e.components);return r.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=d(n),y=o,m=p["".concat(l,".").concat(y)]||p[y]||c[y]||i;return n?r.createElement(m,a(a({ref:t},u),{},{components:n})):r.createElement(m,a({ref:t},u))}));function y(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var d=2;d<i;d++)a[d]=n[d];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},9950:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var r=n(7462),o=(n(7294),n(3905));const i={},a="IAS Proxy",s={unversionedId:"node/run-your-node/ias-proxy",id:"node/run-your-node/ias-proxy",title:"IAS Proxy",description:"This guide will cover setting up an Intel Attestation Service (IAS) Proxy node for the Oasis Network. This guide assumes some basic knowledge on the use of command line tools.",source:"@site/docs/node/run-your-node/ias-proxy.md",sourceDirName:"node/run-your-node",slug:"/node/run-your-node/ias-proxy",permalink:"/node/run-your-node/ias-proxy",draft:!1,editUrl:"https://github.com/oasisprotocol/docs/edit/main/docs/node/run-your-node/ias-proxy.md",tags:[],version:"current",lastUpdatedAt:1675933402,formattedLastUpdatedAt:"Feb 9, 2023",frontMatter:{},sidebar:"operators",previous:{title:"Signing Key Manager Policy",permalink:"/node/run-your-node/keymanager-node/signing-key-manager-policy"},next:{title:"Sentry Node",permalink:"/node/run-your-node/sentry-node"}},l={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Obtaining IAS Service Provider ID (SPID) and API Key",id:"obtaining-ias-service-provider-id-spid-and-api-key",level:3},{value:"Creating a Working Directory",id:"creating-a-working-directory",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Starting the IAS Proxy",id:"starting-the-ias-proxy",level:2},{value:"IAS Proxy Public Key",id:"ias-proxy-public-key",level:2},{value:'Share IAS Proxy address <a id="share-seed-node-address"></a>',id:"share-ias-proxy-address-",level:3}],u={toc:d};function c(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"ias-proxy"},"IAS Proxy"),(0,o.kt)("p",null,"This guide will cover setting up an ",(0,o.kt)("a",{parentName:"p",href:"https://software.intel.com/content/www/us/en/develop/download/intel-sgx-intel-epid-provisioning-and-attestation-services.html"},"Intel Attestation Service (IAS)")," Proxy node for the Oasis Network. This guide assumes some basic knowledge on the use of command line tools."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"Before following this guide, make sure you've followed the ",(0,o.kt)("a",{parentName:"p",href:"prerequisites"},"Prerequisites")," section and have the Oasis Node binary installed on your system. The IAS Proxy connects to an Oasis Node, so make sure you have a running node first. For more details, see the instructions on how to ",(0,o.kt)("a",{parentName:"p",href:"/node/run-your-node/non-validator-node#configuration"},"Run a Non-validator Node"),"."),(0,o.kt)("h3",{id:"obtaining-ias-service-provider-id-spid-and-api-key"},"Obtaining IAS Service Provider ID (SPID) and API Key"),(0,o.kt)("p",null,"Running the ",(0,o.kt)("a",{parentName:"p",href:"https://software.intel.com/content/www/us/en/develop/download/intel-sgx-intel-epid-provisioning-and-attestation-services.html"},"Intel Attestation Service (IAS)")," Proxy requires access to the IAS API. Go to ",(0,o.kt)("a",{parentName:"p",href:"https://api.portal.trustedservices.intel.com/EPID-attestation"},"IAS Enhanced Privacy ID (EPID) attestation")," page and signup for the ",(0,o.kt)("em",{parentName:"p"},"Production Access"),". As a service provider, you will register your TLS certificate and obtain your Service Provider ID (SPID) and API key. The SPID and API key will be used by the IAS Proxy to communicate with the IAS."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Basic understanding of SGX Remote attestation is recommended. See Intel's ",(0,o.kt)("a",{parentName:"p",href:"https://software.intel.com/content/www/us/en/develop/articles/code-sample-intel-software-guard-extensions-remote-attestation-end-to-end-example.html"},"Remote Attestation End-to-End Example")," for a short practical introduction.")),(0,o.kt)("h3",{id:"creating-a-working-directory"},"Creating a Working Directory"),(0,o.kt)("p",null,"We will be using the following working directory ",(0,o.kt)("inlineCode",{parentName:"p"},"/node/ias")," (feel free to name your directory however you wish)."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The directory permissions should be ",(0,o.kt)("inlineCode",{parentName:"li"},"rwx------"),".")),(0,o.kt)("p",null,"To create the directory, use the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"mkdir -m700 -p /node/ias\n")),(0,o.kt)("h2",{id:"configuration"},"Configuration"),(0,o.kt)("p",null,"To avoid specifying the IAS Service Provider ID (SPID) and API key in the Oasis Node configuration directly, IAS Proxy supports reading the SPID and API key from environment variables. Make sure you have the following environment variables set:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},'OASIS_IAS_SPID="<your-SPID>"\nOASIS_IAS_APIKEY="<your-API-key>"\n')),(0,o.kt)("p",null,"In order to configure the IAS proxy create the ",(0,o.kt)("inlineCode",{parentName:"p"},"/node/ias/config.yml")," file with the following content:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"datadir: /node/ias\n\nlog:\n  level:\n    default: info\n  format: JSON\n\naddress: unix:{{ oasis_node_socket }}\n\ngrpc:\n  port: 8650\n")),(0,o.kt)("p",null,"Before using this configuration you should collect the following information to replace the  variables present in the configuration file:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"{{ oasis_node_socket }}"),": Path to a running client Oasis Node socket.")),(0,o.kt)("h2",{id:"starting-the-ias-proxy"},"Starting the IAS Proxy"),(0,o.kt)("p",null,"You can start the IAS Proxy using the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"oasis-node ias proxy --config /node/ias/config.yml\n")),(0,o.kt)("h2",{id:"ias-proxy-public-key"},"IAS Proxy Public Key"),(0,o.kt)("p",null,"The TLS public key required for connecting to the IAS Proxy is located in the configured ",(0,o.kt)("inlineCode",{parentName:"p"},"datadir")," (e.g.",(0,o.kt)("inlineCode",{parentName:"p"},"/node/ias"),")."),(0,o.kt)("h3",{id:"share-ias-proxy-address-"},"Share IAS Proxy address ",(0,o.kt)("a",{id:"share-seed-node-address"})),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"/node/run-your-node/paratime-node"},"ParaTime nodes")," can now use your IAS Proxy by specifying it in configuration, e.g.:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"--ias.proxy.address <IAS_PROXY_PUBLIC_KEY>@<EXTERNAL_IP>:8650\n")))}c.isMDXComponent=!0}}]);