"use strict";(self.webpackChunkdocs_oasis_dev=self.webpackChunkdocs_oasis_dev||[]).push([[9008],{3905:(e,t,o)=>{o.d(t,{Zo:()=>d,kt:()=>p});var r=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)o=s[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var i=r.createContext({}),l=function(e){var t=r.useContext(i),o=t;return e&&(o="function"==typeof e?e(t):a(a({},t),e)),o},d=function(e){var t=l(e.components);return r.createElement(i.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var o=e.components,n=e.mdxType,s=e.originalType,i=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),u=l(o),p=n,h=u["".concat(i,".").concat(p)]||u[p]||m[p]||s;return o?r.createElement(h,a(a({ref:t},d),{},{components:o})):r.createElement(h,a({ref:t},d))}));function p(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=o.length,a=new Array(s);a[0]=u;var c={};for(var i in t)hasOwnProperty.call(t,i)&&(c[i]=t[i]);c.originalType=e,c.mdxType="string"==typeof e?e:n,a[1]=c;for(var l=2;l<s;l++)a[l]=o[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,o)}u.displayName="MDXCreateElement"},7242:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>i,contentTitle:()=>a,default:()=>m,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var r=o(7462),n=(o(7294),o(3905));const s={},a="Committee Scheduler",c={unversionedId:"core/consensus/services/scheduler",id:"core/consensus/services/scheduler",title:"Committee Scheduler",description:"The committee scheduler service is responsible for periodically scheduling all",source:"@site/docs/core/consensus/services/scheduler.md",sourceDirName:"core/consensus/services",slug:"/core/consensus/services/scheduler",permalink:"/core/consensus/services/scheduler",draft:!1,editUrl:"https://github.com/oasisprotocol/oasis-core/edit/stable/22.2.x/docs/consensus/services/scheduler.md",tags:[],version:"current",lastUpdatedAt:1669418750,formattedLastUpdatedAt:"Nov 25, 2022",frontMatter:{},sidebar:"oasisCore",previous:{title:"Registry",permalink:"/core/consensus/services/registry"},next:{title:"Governance",permalink:"/core/consensus/services/governance"}},i={},l=[{value:"Events",id:"events",level:2},{value:"Validator Committee",id:"validator-committee",level:2}],d={toc:l};function m(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,r.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"committee-scheduler"},"Committee Scheduler"),(0,n.kt)("p",null,"The committee scheduler service is responsible for periodically scheduling all\ncommittees (validator, compute, key manager) based on ",(0,n.kt)("a",{parentName:"p",href:"/core/consensus/services/epochtime"},"epoch-based time")," and\nentropy provided by the ",(0,n.kt)("a",{parentName:"p",href:"/core/consensus/services/beacon"},"random beacon"),"."),(0,n.kt)("p",null,"The service interface definition lives in ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/oasisprotocol/oasis-core/tree/master/go/scheduler/api"},(0,n.kt)("inlineCode",{parentName:"a"},"go/scheduler/api")),". It defines the\nsupported queries and transactions. For more information you can also check out\nthe ",(0,n.kt)("a",{parentName:"p",href:"https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/scheduler/api?tab=doc"},"consensus service API documentation"),"."),(0,n.kt)("h2",{id:"events"},"Events"),(0,n.kt)("h2",{id:"validator-committee"},"Validator Committee"),(0,n.kt)("p",null,"To schedule the validator committee, the committee scheduler selects among\nnodes ",(0,n.kt)("a",{parentName:"p",href:"/core/consensus/services/registry#register-node"},"registered")," with the ",(0,n.kt)("a",{parentName:"p",href:"https://pkg.go.dev/github.com/oasisprotocol/oasis-core/go/common/node?tab=doc#RoleValidator"},(0,n.kt)("inlineCode",{parentName:"a"},"RoleValidator"))," role.\nEach node's entity must have an ",(0,n.kt)("a",{parentName:"p",href:"/core/consensus/services/staking#escrow"},"escrow account balance")," meeting the total\nthresholds for the nodes and runtimes that it has registered.\nIf an entity's escrow account balance is too low to meet the total threshold,\nthe committee scheduler does not consider that entity's nodes."),(0,n.kt)("p",null,"From these qualifying nodes, the committee scheduler selects at most one node\nfrom each entity, up to a maximum validator committee size.\nThe maximum validator committee size is configured in the genesis document,\nunder the path ",(0,n.kt)("inlineCode",{parentName:"p"},".scheduler.params.max_validators")," (consult the ",(0,n.kt)("a",{parentName:"p",href:"/node/genesis-doc#committee-scheduler"},"genesis\ndocument")," for details).\nUnlike how the committee scheduler schedules other committees, it schedules the\nvalidator committee by choosing nodes from the entities that have the highest\nescrow account balances."),(0,n.kt)("p",null,"When the committee scheduler schedules the validator committee, it additionally\nassigns each member a ",(0,n.kt)("em",{parentName:"p"},"voting power"),", which controls (i) the weight of its\nvotes in the consensus protocol and (ii) how often it serves as the proposer in\nthe consensus protocol."),(0,n.kt)("p",null,"The committee scheduler assigns a validator's voting power proportional to its\nentity's ",(0,n.kt)("a",{parentName:"p",href:"/core/consensus/services/staking#escrow"},"escrow account balance"),"."))}m.isMDXComponent=!0}}]);